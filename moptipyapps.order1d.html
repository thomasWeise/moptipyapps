<!doctype html><html data-content_root=./ lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0"name=viewport><meta content="width=device-width,initial-scale=1"name=viewport><title>moptipyapps.order1d package — moptipyapps 0.8.68 documentation</title><link href="/moptipyapps/_static/pygments.css?v=b86133f3"rel=stylesheet><link href="/moptipyapps/_static/bizstyle.css?v=5283bb3d"rel=stylesheet><script src="/moptipyapps/_static/documentation_options.js?v=f8800668"></script><script src="/moptipyapps/_static/doctools.js?v=9bcbadda"></script><script src="/moptipyapps/_static/sphinx_highlight.js?v=dc90522c"></script><script src=_static/bizstyle.js></script><link href=https://thomasweise.github.io/moptipyapps/moptipyapps.order1d.html rel=canonical><link href=genindex.html rel=index title=Index><link href=search.html rel=search title=Search><link title="moptipyapps.qap package"href=moptipyapps.qap.html rel=next><link title="moptipyapps.dynamic_control.systems package"href=moptipyapps.dynamic_control.systems.html rel=prev><meta content="width=device-width,initial-scale=1.0"name=viewport><body><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"accesskey=I href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="moptipyapps.qap package"accesskey=N href=moptipyapps.qap.html>next</a> |<li class=right><a title="moptipyapps.dynamic_control.systems package"accesskey=P href=moptipyapps.dynamic_control.systems.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>moptipyapps 0.8.68 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>moptipyapps</a> »<li class="nav-item nav-item-2"><a accesskey=U href=moptipyapps.html>moptipyapps package</a> »<li class="nav-item nav-item-this"><a href>moptipyapps.order1d package</a></ul></div><div class=document><div class=documentwrapper><div class=bodywrapper><div class=body role=main><section id=module-moptipyapps.order1d><span id=moptipyapps-order1d-package></span><h1>moptipyapps.order1d package<a title="Link to this heading"class=headerlink href=#module-moptipyapps.order1d>¶</a></h1><p>A set of tools for ordering objects in 1 dimension.<p>Let’s assume that we have <cite>n</cite> objects and a distance metric that can compute the distance between two objects. We do not know and also do not care about in how many dimension the objects exist - we just have objects and a distance metric.<p>Now we want to find a one-dimensional order of the objects that reflects their original distance-based topology. For each object <cite>a</cite>, we want that its closest neighbor in the order is also its actual closest neighbor according to the distance metric. It’s second-closest neighbor should be the actual second-closest neighbor according to the distance metric. And so on.<p>Since we only care about the object order and do not want to metrically map the distances to one dimension, we can represent the solution as permutation of natural numbers.<p>Of course, in a one-dimensional order, each object has exactly two closest neighbors (the one on its left and the one on its right) unless it is situated either at the beginning or end of the order, in which case it has exactly one closest neighbor. Based on the actual distance metric, an object may have any number of closest neighbors, maybe only one, or maybe three equally-far away objects. So it is not clear whether a perfect mapping to the one-dimensional permutations even exists. Probably it will not, but this shall not bother us.<p>Either way, we can try to find one that comes as close as possible to the real deal.<p>Another way to describe this problem is as follows: Imagine that you have <cite>n</cite> objects and only know their mutual distances. You want to arrange them on a one-dimensional axis in a way that does sort of reflect their neighborhood structure in whatever space they are originally located in.<p>The goal of solving this one-dimensional ordering problem is then to arrange <cite>n</cite> objects on a 1-dimensional (e.g., horizontal) axis given a distance matrix describing their location in a potentially high-dimensional or unstructured space. The objects should be arranged in such a way that, for each object,<ul class=simple><li><p>the nearest neighbors on the 1-dimensional axis are also the nearest neighbors in the original space (according to the distance matrix provided),<li><p>the second nearest neighbors on the 1-dimensional axis are also the second nearest neighbors in the original space (according to the distance matrix provided),<li><p>the third nearest neighbors on the 1-dimensional axis are also the third nearest neighbors in the original space (according to the distance matrix provided),<li><p>and so on; with (e.g., quadratically) decreasing weights of neighbor distance ranks.</ul><p>We do not care about the actual precise distances (e.g., something like “0.001”) between the objects on either the one-dimensional nor the original space. We only care about the distance ranks, i.e., about “2nd nearest neighbor,” but not “0.012 distance units away.” The solutions of this problem are thus permutations (orders) of the objects. Of course, if we really want to plot the objects, such a permutation can easily be translated to <cite>x</cite>-coordinates, say, by dividing the index of an object by the number of objects, which nets values in <cite>[0,1]</cite>. But basically, we reduce the task to finding permutations of objects that reflect the neighbor structure of the original space as closely as possible.<p>If such a problem is solved correctly, then the arrangement on the one-dimensional axis should properly reflect the arrangement of the objects in the original space. Of course, solving this problem exactly may not actually be possible, since an object on a one-dimensional axis may either have exactly two <cite>i</cite>-nearest-neighbors (if it is at least <cite>i</cite> slots away from either end of the permutation) or exactly <cite>1</cite> such neighbor, if it is closer that <cite>i</cite> units. The object directly at the start of the permutation has only 1 nearest neighbor (the object that comes next). That next object, however, has two, namely the first object and the third object. In the original space where the objects come from, however, there may be any number of “nearest neighbors.” Imagine a two-dimensional space where one object sits at the center of a circle of other objects. Then all other objects are its nearest neighbors, whereas an object on the circle either has exactly two nearest neighbors or, maybe, in the odd situation that the radius equals a multiple of the distance to the neighbors on the circle, three. Such a structure cannot be represented exactly in one dimension.<p>But that’s OK. Because we mainly do this for visualization purposes anyway.<p>Now here comes the cool thing: We can cast this problem to a Quadratic Assignment Problem (<a class="reference internal"href=moptipyapps.qap.html#module-moptipyapps.qap title=moptipyapps.qap><code class="xref py py-mod docutils literal notranslate"><span class=pre>qap</span></code></a>). A QAP is defined by a distance matrix and a flow matrix. The idea is to assign <cite>n</cite> facilities to locations. The distances between the locations are given by the distance matrix. At the same time, the flow matrix defines the flows between the facilities. The goal is to find the assignment of facilities to locations that minimizes the overall “flow times distance” product sum.<p>We can translate the “One-Dimensional Ordering Problem” to the QAP as follows: Imagine that we have <cite>n</cite> unique objects and know the (symmetric) distances between them.<p>Let’s say that we have four numbers as objects, <cite>1</cite>, <cite>2</cite>, <cite>3</cite>, <cite>4</cite>. >>> data = [1, 2, 3, 4] >>> n = len(data)<p>The distance between two numbers <cite>a</cite> and <cite>b</cite> be <cite>abs(a - b)</cite>. >>> def dist(a, b): … return abs(a - b)<p>The <strong>original</strong> distance matrix would be<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>dm</span> <span class=o>=</span> <span class=p>[[</span><span class=n>dist</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>)</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>)]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>)]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>dm</span><span class=p>)</span>
<span class=go>[[0, 1, 2, 3], [1, 0, 1, 2], [2, 1, 0, 1], [3, 2, 1, 0]]</span>
</pre></div></div><p>Now from this matrix, we can find the nearest neighbors as follows:<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>scipy.stats</span><span class=w> </span><span class=kn>import</span> <span class=n>rankdata</span>  <span class=c1># type: ignore</span>
<span class=gp>>>> </span><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
<span class=gp>>>> </span><span class=n>rnks</span> <span class=o>=</span> <span class=n>rankdata</span><span class=p>(</span><span class=n>dm</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s2>"average"</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>rnks</span><span class=p>)</span>
<span class=go>[[0.  1.  2.  3. ]</span>
<span class=go> [1.5 0.  1.5 3. ]</span>
<span class=go> [3.  1.5 0.  1.5]</span>
<span class=go> [3.  2.  1.  0. ]]</span>
</pre></div></div><p>From the perspective of “<cite>1</cite>”, “<cite>2</cite>” is the first nearest neighbor, “<cite>3</cite>” is the second-nearest neighbor, and “<cite>4</cite>” is the third-nearest neighbor. From the perspective of “<cite>2</cite>”, both “<cite>1</cite>” and “<cite>3</cite>” are nearest neighbors, so they share rank <cite>1.5</cite>. And so on.<p>Let’s multiply this by <cite>2</cite> to get integers: [If no fractional ranks appear, then we do not need to multiply by <cite>2</cite>.]<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>rnks</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>rnks</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span> <span class=n>dtype</span><span class=o>=</span><span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>rnks</span><span class=p>)</span>
<span class=go>[[0 2 4 6]</span>
<span class=go> [3 0 3 6]</span>
<span class=go> [6 3 0 3]</span>
<span class=go> [6 4 2 0]]</span>
</pre></div></div><p>Now we want to translate this to a flow matrix (NOT a distance matrix). What we want is that there is a big flow from each object to its nearest neighbor, a smaller flow from each object to its second-nearest neighbor, a yet smaller flow to the third nearest neighbor, and so on. So all we need to do is to subtract the elements off the diagonal from <cite>8 = 2*n</cite>. [If no fractional elements were there, then we would use <cite>n</cite> instead of <cite>2*n</cite>.] Anyway, we get:<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>rnks</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>0</span> <span class=k>if</span> <span class=n>x</span> <span class=o>==</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>2</span><span class=o>*</span><span class=n>n</span> <span class=o>-</span> <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>a</span><span class=p>]</span>
<span class=gp>... </span>                 <span class=k>for</span> <span class=n>a</span> <span class=ow>in</span> <span class=n>rnks</span><span class=p>],</span> <span class=nb>int</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>rnks</span><span class=p>)</span>
<span class=go>[[0 6 4 2]</span>
<span class=go> [5 0 5 2]</span>
<span class=go> [2 5 0 5]</span>
<span class=go> [2 4 6 0]]</span>
</pre></div></div><p>We can see: The flow from “<cite>1</cite>” to “<cite>2</cite>” is <cite>6</cite>, which higher than the flow from “<cite>1</cite>” to “<cite>3</cite>” (namely <cite>4</cite>), and so on. The low from “<cite>2</cite>” to “<cite>1</cite>” is <cite>5</cite>, which is a bit lower than <cite>6</cite> but higher than <cite>4</cite>, because “<cite>1</cite>” is the “1.5th nearest neighbor of <cite>2</cite>”.<p>Just for good measures, we can weight this qudratically, so we get:<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>rnks</span> <span class=o>=</span> <span class=n>rnks</span> <span class=o>**</span> <span class=mi>2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>rnks</span><span class=p>)</span>
<span class=go>[[ 0 36 16  4]</span>
<span class=go> [25  0 25  4]</span>
<span class=go> [ 4 25  0 25]</span>
<span class=go> [ 4 16 36  0]]</span>
</pre></div></div><p>This way, we give much more importance to “getting the nearest neighbors right” than getting “far-away neighbors” right. Nice.<p>OK, but how about the distance matrix for the QAP? What’s the distance? Well, it’s the distance that I would get by arranging the objects in a specific order. It is the difference of the indices in the permutation:<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=nb>abs</span><span class=p>(</span><span class=n>i</span> <span class=o>-</span> <span class=n>j</span><span class=p>)</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>)]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>)],</span> <span class=nb>int</span><span class=p>))</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
</pre></div></div><p>This means: The object that I will place at index <cite>1</cite> has a distance of “<cite>1</cite>” to the object at index <cite>2</cite>. It has a distance of “<cite>2</cite>” to the object at index <cite>3</cite>. It has a distance of “<cite>3</cite>” to the object at index <cite>4</cite>. The object at index <cite>2</cite> will have a distance of “<cite>1</cite>” to both the objects at indices <cite>1</cite> and <cite>3</cite> and a distance of “<cite>2</cite>” to the object at index <cite>4</cite>. And so on.<p>In other words, objects that are close in their original space have a big flow between each other. If we put them at directly neighboring indexes, then we will multiply this big flow with a small number. If we put them at distant indices, then we will multiply this big flow with a large number.<p>Objects that are far away from each other in their original space have a small flow between each other. If we put them at indices that are far apart, we will multiply the larger index-difference = distance with a small number. If we put them close, then we multiply a small distance with a small flow - but we will have to pay for this elsewhere, because then we may need to put objects with a larger flow between each other farther apart.<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>moptipyapps.order1d.instance</span><span class=w> </span><span class=kn>import</span> <span class=n>Instance</span>
<span class=gp>>>> </span><span class=n>the_instance</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>dist</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"bla"</span><span class=p>,</span> <span class=p>),</span> <span class=k>lambda</span> <span class=n>i</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>))</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[ 0 36 16  4]</span>
<span class=go> [25  0 25  4]</span>
<span class=go> [ 4 25  0 25]</span>
<span class=go> [ 4 16 36  0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
</pre></div></div><p>There is one little thing that needs to be done: If we have many objects, then the QAP objective values can get very large. So it makes sense to define a “horizon” after which the relationship for objects are ignored. Above, we chose “100”, which had no impact. If we choose “2”, then only the two nearest neighbors would be considered and we get:<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>the_instance</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>dist</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>(</span><span class=s2>"bla"</span><span class=p>,</span> <span class=p>),</span> <span class=k>lambda</span> <span class=n>i</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>i</span><span class=p>))</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[ 0 16  4  0]</span>
<span class=go> [ 9  0  9  0]</span>
<span class=go> [ 0  9  0  9]</span>
<span class=go> [ 0  4 16  0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
</pre></div></div><p>The distance matrix of the QAP stays the same, but the flow matrix now has several zeros. Anything farther away than the second-nearest neighbor will be ignored, i.e., get a flow of <cite>0</cite>.<section id=submodules><h2>Submodules<a title="Link to this heading"class=headerlink href=#submodules>¶</a></h2></section><section id=module-moptipyapps.order1d.distances><span id=moptipyapps-order1d-distances-module></span><h2>moptipyapps.order1d.distances module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.order1d.distances>¶</a></h2><p>Some examples for distance metrics.<dl class="py function"><dt class="sig sig-object py"id=moptipyapps.order1d.distances.swap_distance><span class="sig-prename descclassname"><span class=pre>moptipyapps.order1d.distances.</span></span><span class="sig-name descname"><span class=pre>swap_distance</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>p1</span></span></em>, <em class=sig-param><span class=n><span class=pre>p2</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/distances.html#swap_distance><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.distances.swap_distance>¶</a><dd><p>Compute the swap distance between two permutations <cite>p1</cite> and <cite>p1</cite>.</p> <p>This is the minimum number of swaps required to translate <cite>p1</cite> to <cite>p2</cite> and vice versa. This function is symmatric.</p> <p>An upper bound for the number of maximum number of swaps that could be required is the length of the permutation. This upper bound can be derived from Selection Sort. Imagine that I want to translate the array <cite>p1</cite> to <cite>p2</cite>. I go through <cite>p1</cite> from beginning to end. If, at index <cite>i</cite>, I find the right element (<cite>p1[i] == p2[i]</cite>), then I do nothing. If not, then the right element must come at some index <cite>j>i</cite> (because all elements before I already have fixed). So I swap <cite>p1[i]</cite> with <cite>p1[j]</cite>. Now <cite>p1[i] == p2[i]</cite> and I increment <cite>i</cite>. Once I arrive at the end of <cite>p1</cite>, it must hold that <cite>all(p1[i] == p2[i])</cite>. At the same time, I have performed at most one swap at each index during the iteration. Hence, I can never need more swaps than the arrays are long.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>p1</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the first permutation<li><p><strong>p2</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the second permutation</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the swap distance, always between <cite>0</cite> and <cite>len(p1)</cite></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>]))</span>
<span class=go>1</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>0</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>1</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>1</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=go>2</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>2</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>4</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>2</span><span class=p>]))</span>
<span class=go>7</span>
<span class=gp>>>> </span><span class=n>swap_distance</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>4</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>2</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
<span class=go>7</span>
</pre></div></div></dl></section><section id=module-moptipyapps.order1d.instance><span id=moptipyapps-order1d-instance-module></span><h2>moptipyapps.order1d.instance module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.order1d.instance>¶</a></h2><p>An instance of the ordering problem.<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.order1d.instance.</span></span><span class="sig-name descname"><span class=pre>Instance</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>distances</span></span></em>, <em class=sig-param><span class=n><span class=pre>flow_power</span></span></em>, <em class=sig-param><span class=n><span class=pre>horizon</span></span></em>, <em class=sig-param><span class=n><span class=pre>tag_titles</span></span></em>, <em class=sig-param><span class=n><span class=pre>tags</span></span></em>, <em class=sig-param><span class=n><span class=pre>name</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>None</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/instance.html#Instance><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance>¶</a><dd><p>Bases: <a class="reference internal"href=moptipyapps.qap.html#moptipyapps.qap.instance.Instance title=moptipyapps.qap.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></p> <p>An instance of the One-Dimensional Ordering Problem.</p> <p>Such an instance represents the ranking of objects by their distance to each other as a <a class="reference internal"href=moptipyapps.qap.html#module-moptipyapps.qap title=moptipyapps.qap><code class="xref py py-mod docutils literal notranslate"><span class=pre>qap</span></code></a> problem.</p> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_dist</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=nb>abs</span><span class=p>(</span><span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_tags</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=sa>f</span><span class=s2>"t</span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s2>"</span>
<span class=gp>>>> </span><span class=n>the_instance</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=n>_dist</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"bla"</span><span class=p>,</span> <span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=p>)</span>
<span class=go>order1d_3_1</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2]</span>
<span class=go> [1 0 1]</span>
<span class=go> [2 1 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_instance</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[0 4 2]</span>
<span class=go> [3 0 3]</span>
<span class=go> [2 4 0]]</span>
</pre></div></div> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance.flow_power><span class="sig-name descname"><span class=pre>flow_power</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> <span class=pre>|</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance.flow_power>¶</a><dd><p>the flow power</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance.from_sequence_and_distance><em class=property><span class=k><span class=pre>static</span></span><span class=w> </span></em><span class="sig-name descname"><span class=pre>from_sequence_and_distance</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>data</span></span></em>, <em class=sig-param><span class=n><span class=pre>get_distance</span></span></em>, <em class=sig-param><span class=n><span class=pre>flow_power</span></span></em>, <em class=sig-param><span class=n><span class=pre>horizon</span></span></em>, <em class=sig-param><span class=n><span class=pre>tag_titles</span></span></em>, <em class=sig-param><span class=n><span class=pre>get_tags</span></span></em>, <em class=sig-param><span class=n><span class=pre>name</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>None</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/instance.html#Instance.from_sequence_and_distance><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance.from_sequence_and_distance>¶</a><dd><p>Turn a sequence of objects into a One-Dimensional Ordering instance.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>data</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Optional><code class="xref py py-data docutils literal notranslate"><span class=pre>Optional</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)]]</span>) – the data source, i.e., an iterable of data elements<li><p><strong>get_tags</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Union><code class="xref py py-data docutils literal notranslate"><span class=pre>Union</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a>]]]</span>) – the function for extracting tags from objects<li><p><strong>get_distance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>), <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> | <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>]</span>) – the function for getting the distance between objects<li><p><strong>flow_power</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> | <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the flow power<li><p><strong>horizon</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the maximal considered rank<li><p><strong>tag_titles</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a>]</span>) – the tag names<li><p><strong>name</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a> | <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>None</span></code>) – the optional name</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference internal"href=#moptipyapps.order1d.instance.Instance title=moptipyapps.order1d.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the ordering instance</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_dist</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=nb>abs</span><span class=p>(</span><span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_tags</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=sa>f</span><span class=s2>"x</span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span> <span class=sa>f</span><span class=s2>"b</span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s2>"</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=n>_dist</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_3_2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[0 4 1]</span>
<span class=go> [4 0 1]</span>
<span class=go> [1 4 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2]</span>
<span class=go> [1 0 1]</span>
<span class=go> [2 1 0]]</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>35</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>_dist</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_4_2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[0 9 1 4]</span>
<span class=go> [9 0 1 4]</span>
<span class=go> [1 4 0 9]</span>
<span class=go> [4 9 1 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>_dist</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_3_2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[0 4 1]</span>
<span class=go> [4 0 1]</span>
<span class=go> [1 4 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2]</span>
<span class=go> [1 0 1]</span>
<span class=go> [2 1 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>tags</span><span class=p>)</span>
<span class=go>((('x1', 'b1'), 0), (('x2', 'b2'), 1), (('x4', 'b4'), 2), (('x4', 'b4'), 2))</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_dist2</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=nb>abs</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=o>-</span> <span class=nb>abs</span><span class=p>(</span><span class=n>b</span><span class=p>))</span> <span class=o>+</span> <span class=mi>1</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>_dist2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_4_2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[ 0 36  9  9]</span>
<span class=go> [36  0  9  9]</span>
<span class=go> [ 4 16  0 36]</span>
<span class=go> [ 4 16 36  0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>_dist2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_4_3</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[  0 216  27  27]</span>
<span class=go> [216   0  27  27]</span>
<span class=go> [  8  64   0 216]</span>
<span class=go> [  8  64 216   0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>tags</span><span class=p>)</span>
<span class=go>((('x1', 'b1'), 0), (('x2', 'b2'), 1), (('x-4', 'b-4'), 2), (('x4', 'b4'), 3))</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>_dist2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_4_3_2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[0 8 0 0]</span>
<span class=go> [8 0 0 0]</span>
<span class=go> [0 1 0 8]</span>
<span class=go> [0 1 8 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>tags</span><span class=p>)</span>
<span class=go>((('x1', 'b1'), 0), (('x2', 'b2'), 1), (('x-4', 'b-4'), 2), (('x4', 'b4'), 3))</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=n>_dist2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>(</span><span class=s2>"a"</span><span class=p>,</span> <span class=s2>"b"</span><span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
<span class=go>order1d_4_2_2</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>flows</span><span class=p>)</span>
<span class=go>[[0 4 0 0]</span>
<span class=go> [4 0 0 0]</span>
<span class=go> [0 1 0 4]</span>
<span class=go> [0 1 4 0]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=o>.</span><span class=n>distances</span><span class=p>)</span>
<span class=go>[[0 1 2 3]</span>
<span class=go> [1 0 1 2]</span>
<span class=go> [2 1 0 1]</span>
<span class=go> [3 2 1 0]]</span>
</pre></div></div></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance.horizon><span class="sig-name descname"><span class=pre>horizon</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance.horizon>¶</a><dd><p>the horizon</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/instance.html#Instance.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance.tag_titles><span class="sig-name descname"><span class=pre>tag_titles</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a><span class=pre>,</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a><span class=pre>]]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance.tag_titles>¶</a><dd><p>the tag titles</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.Instance.tags><span class="sig-name descname"><span class=pre>tags</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a><span class=pre>,</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a><span class=pre>],</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>],</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a><span class=pre>]]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.Instance.tags>¶</a><dd><p>the tags, i.e., additional data for each original element</p></dl></dl><dl class="py class"><dt class="sig sig-object py"id=moptipyapps.order1d.instance.T><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.order1d.instance.</span></span><span class="sig-name descname"><span class=pre>T</span></span><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.instance.T>¶</a><dd><p>the type variable for the source object</p> <p>alias of TypeVar(‘T’)</p></dl></section><section id=module-moptipyapps.order1d.space><span id=moptipyapps-order1d-space-module></span><h2>moptipyapps.order1d.space module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.order1d.space>¶</a></h2><p>An extension of the permutation space for one-dimensional ordering.<p>The main difference is how the <cite>to_str</cite> result is noted, namely that it contains the mapping of tags to locations.<div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_dist</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=nb>abs</span><span class=p>(</span><span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>_tags</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>return</span> <span class=sa>f</span><span class=s2>"t</span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s2>"</span>
<span class=gp>>>> </span><span class=n>the_instance</span> <span class=o>=</span> <span class=n>Instance</span><span class=o>.</span><span class=n>from_sequence_and_distance</span><span class=p>(</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=n>_dist</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=p>(</span><span class=s2>"x"</span><span class=p>,</span> <span class=p>),</span> <span class=n>_tags</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>the_space</span> <span class=o>=</span> <span class=n>OrderingSpace</span><span class=p>(</span><span class=n>the_instance</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>the_str</span> <span class=o>=</span> <span class=n>the_space</span><span class=o>.</span><span class=n>to_str</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span>
<span class=gp>>>> </span><span class=n>the_str</span><span class=o>.</span><span class=n>splitlines</span><span class=p>()</span>
<span class=go>['0;2;1', '', 'indexZeroBased;suggestedXin01;x', '0;0;t1', '2;1;t2', '2;1;t2', '1;0.5;t3', '1;0.5;t3', '1;0.5;t3']</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>the_space</span><span class=o>.</span><span class=n>from_str</span><span class=p>(</span><span class=n>the_str</span><span class=p>))</span>
<span class=go>[0 2 1]</span>
</pre></div></div><dl class="py class"><dt class="sig sig-object py"id=moptipyapps.order1d.space.OrderingSpace><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.order1d.space.</span></span><span class="sig-name descname"><span class=pre>OrderingSpace</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/space.html#OrderingSpace><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.space.OrderingSpace>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.spaces.html#moptipy.spaces.permutations.Permutations><code class="xref py py-class docutils literal notranslate"><span class=pre>Permutations</span></code></a></p> <p>A space for one-dimensional orderings.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.order1d.space.OrderingSpace.from_str><span class="sig-name descname"><span class=pre>from_str</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>text</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/space.html#OrderingSpace.from_str><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.space.OrderingSpace.from_str>¶</a><dd><p>Get the string version from the given text.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>text</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the text</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the string</p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.order1d.space.OrderingSpace.instance><span class="sig-name descname"><span class=pre>instance</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><span class=pre>Final[Instance]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.space.OrderingSpace.instance>¶</a><dd><p>the instance</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.order1d.space.OrderingSpace.to_str><span class="sig-name descname"><span class=pre>to_str</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/order1d/space.html#OrderingSpace.to_str><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.order1d.space.OrderingSpace.to_str>¶</a><dd><p>Convert a solution to a string.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the permutation</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the string</p></dl></dl></dl></section></section><div class=clearer></div></div></div></div><div aria-label=Main class=sphinxsidebar role=navigation><div class=sphinxsidebarwrapper><div><h3><a href=index.html>Table of Contents</a></h3><ul><li><a class="reference internal"href=#>moptipyapps.order1d package</a><ul><li><a class="reference internal"href=#submodules>Submodules</a><li><a class="reference internal"href=#module-moptipyapps.order1d.distances>moptipyapps.order1d.distances module</a><ul><li><a class="reference internal"href=#moptipyapps.order1d.distances.swap_distance><code class="docutils literal notranslate"><span class=pre>swap_distance()</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.order1d.instance>moptipyapps.order1d.instance module</a><ul><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance><code class="docutils literal notranslate"><span class=pre>Instance</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance.flow_power><code class="docutils literal notranslate"><span class=pre>Instance.flow_power</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance.from_sequence_and_distance><code class="docutils literal notranslate"><span class=pre>Instance.from_sequence_and_distance()</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance.horizon><code class="docutils literal notranslate"><span class=pre>Instance.horizon</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance.log_parameters_to><code class="docutils literal notranslate"><span class=pre>Instance.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance.tag_titles><code class="docutils literal notranslate"><span class=pre>Instance.tag_titles</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.instance.Instance.tags><code class="docutils literal notranslate"><span class=pre>Instance.tags</span></code></a></ul><li><a class="reference internal"href=#moptipyapps.order1d.instance.T><code class="docutils literal notranslate"><span class=pre>T</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.order1d.space>moptipyapps.order1d.space module</a><ul><li><a class="reference internal"href=#moptipyapps.order1d.space.OrderingSpace><code class="docutils literal notranslate"><span class=pre>OrderingSpace</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.order1d.space.OrderingSpace.from_str><code class="docutils literal notranslate"><span class=pre>OrderingSpace.from_str()</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.space.OrderingSpace.instance><code class="docutils literal notranslate"><span class=pre>OrderingSpace.instance</span></code></a><li><a class="reference internal"href=#moptipyapps.order1d.space.OrderingSpace.to_str><code class="docutils literal notranslate"><span class=pre>OrderingSpace.to_str()</span></code></a></ul></ul></ul></ul></div><div><h4>Previous topic</h4><p class=topless><a title="previous chapter"href=moptipyapps.dynamic_control.systems.html>moptipyapps.dynamic_control.systems package</a></div><div><h4>Next topic</h4><p class=topless><a title="next chapter"href=moptipyapps.qap.html>moptipyapps.qap package</a></div><div aria-label="source link"role=note><h3>This Page</h3><ul class=this-page-menu><li><a href=_sources/moptipyapps.order1d.rst.txt rel=nofollow>Show Source</a></ul></div><search id=searchbox role=search style=display:none> <h3 id=searchlabel>Quick search</h3> <div class=searchformwrapper><form action=search.html class=search><input aria-labelledby=searchlabel autocapitalize=off autocomplete=off autocorrect=off name=q spellcheck=false><input type=submit value=Go></form></div> </search><script>document.getElementById(`searchbox`).style.display=`block`</script></div></div><div class=clearer></div></div><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="moptipyapps.qap package"href=moptipyapps.qap.html>next</a> |<li class=right><a title="moptipyapps.dynamic_control.systems package"href=moptipyapps.dynamic_control.systems.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>moptipyapps 0.8.68 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>moptipyapps</a> »<li class="nav-item nav-item-2"><a href=moptipyapps.html>moptipyapps package</a> »<li class="nav-item nav-item-this"><a href>moptipyapps.order1d package</a></ul></div><div class=footer role=contentinfo>© Copyright 2023-2025, Thomas Weise.</div>
