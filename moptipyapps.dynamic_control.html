<!doctype html><html data-content_root=./ lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0"name=viewport><meta content="width=device-width,initial-scale=1"name=viewport><title>moptipyapps.dynamic_control package — moptipyapps 0.8.68 documentation</title><link href="/moptipyapps/_static/pygments.css?v=b86133f3"rel=stylesheet><link href="/moptipyapps/_static/bizstyle.css?v=5283bb3d"rel=stylesheet><script src="/moptipyapps/_static/documentation_options.js?v=f8800668"></script><script src="/moptipyapps/_static/doctools.js?v=9bcbadda"></script><script src="/moptipyapps/_static/sphinx_highlight.js?v=dc90522c"></script><script src=_static/bizstyle.js></script><link href=https://thomasweise.github.io/moptipyapps/moptipyapps.dynamic_control.html rel=canonical><link href=genindex.html rel=index title=Index><link href=search.html rel=search title=Search><link title="moptipyapps.dynamic_control.controllers package"href=moptipyapps.dynamic_control.controllers.html rel=next><link title="moptipyapps.binpacking2d.objectives package"href=moptipyapps.binpacking2d.objectives.html rel=prev><meta content="width=device-width,initial-scale=1.0"name=viewport><body><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"accesskey=I href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="moptipyapps.dynamic_control.controllers package"accesskey=N href=moptipyapps.dynamic_control.controllers.html>next</a> |<li class=right><a title="moptipyapps.binpacking2d.objectives package"accesskey=P href=moptipyapps.binpacking2d.objectives.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>moptipyapps 0.8.68 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>moptipyapps</a> »<li class="nav-item nav-item-2"><a accesskey=U href=moptipyapps.html>moptipyapps package</a> »<li class="nav-item nav-item-this"><a href>moptipyapps.dynamic_control package</a></ul></div><div class=document><div class=documentwrapper><div class=bodywrapper><div class=body role=main><section id=module-moptipyapps.dynamic_control><span id=moptipyapps-dynamic-control-package></span><h1>moptipyapps.dynamic_control package<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control>¶</a></h1><p>Examples of dynamic control problems.<p>Here we have examples for dynamic control problems. An <a class="reference internal"href=#module-moptipyapps.dynamic_control.instance title=moptipyapps.dynamic_control.instance><code class="xref py py-mod docutils literal notranslate"><span class=pre>instance</span></code></a> of the dynamic control problem is composed of<ul class=simple><li><p>a <a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a> of differential equations that govern the state of a system and that also incorporate the output of a controller,<li><p>a <a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a> blueprint, i.e., a function that can be parameterized and that computes a controller output from the system state, and<li><p>an <a class="reference internal"href=#module-moptipyapps.dynamic_control.objective title=moptipyapps.dynamic_control.objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>objective</span></code></a> that rates how well-behaved the system driven by the controller is in a simulation.</ul><p>Such systems can serve as primitive testbeds of actual dynamic control scenarios such as flight control or other fluid dynamic systems. Different from such more complicated systems, they are much faster and easier to simulate, though. So we can play with them much more easily and quickly.<p>The initial starting point of the work here were conversations with Prof. Dr. Bernd NOACK and Guy Yoslan CORNEJO MACEDA of the Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)) as well as the following two MSc theses and book:<ol class="arabic simple"><li><p>Yuxiang LI (李宇翔). Jet Mixing Enhancement using Deep Reinforcement Learning (基于深度强化学习的射流混合增强控制). MSc Thesis. Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)). January 2023.<li><p>Wei SUN (孙伟). Wake Control of 1-2-3 Fluidic Pinball using Deep Reinforcement Learning (基于深度强化学习方法的 1-2-3 流体弹球尾流控制). MSc Thesis. Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)). January 2023.<li><p>Guy Yoslan CORNEJO MACEDA, François LUSSEYRAN, and Bernd R. NOACK. xMLC: A Toolkit for Machine Learning Control, First Edition. Machine Learning Tools in Fluid Mechanics, Vol 2. Shenzhen & Paris; Universitätsbibliothek der Technischen Universität Braunschweig. 2022 <a class="reference external"href=https://doi.org/10.24355/dbbs.084-202208220937-0>https://doi.org/10.24355/dbbs.084-202208220937-0</a></ol><section id=subpackages><h2>Subpackages<a title="Link to this heading"class=headerlink href=#subpackages>¶</a></h2><div class="toctree-wrapper compound"><ul><li class=toctree-l1><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html>moptipyapps.dynamic_control.controllers package</a><ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#submodules>Submodules</a><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.ann>moptipyapps.dynamic_control.controllers.ann module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.ann.anns><code class="docutils literal notranslate"><span class=pre>anns()</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.ann.make_ann><code class="docutils literal notranslate"><span class=pre>make_ann()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.codegen>moptipyapps.dynamic_control.controllers.codegen module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator><code class="docutils literal notranslate"><span class=pre>CodeGenerator</span></code></a><ul><li class=toctree-l4><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator.build><code class="docutils literal notranslate"><span class=pre>CodeGenerator.build()</span></code></a><li class=toctree-l4><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator.endline><code class="docutils literal notranslate"><span class=pre>CodeGenerator.endline()</span></code></a><li class=toctree-l4><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator.indent><code class="docutils literal notranslate"><span class=pre>CodeGenerator.indent()</span></code></a><li class=toctree-l4><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator.unindent><code class="docutils literal notranslate"><span class=pre>CodeGenerator.unindent()</span></code></a><li class=toctree-l4><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator.write><code class="docutils literal notranslate"><span class=pre>CodeGenerator.write()</span></code></a><li class=toctree-l4><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.codegen.CodeGenerator.writeln><code class="docutils literal notranslate"><span class=pre>CodeGenerator.writeln()</span></code></a></ul></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.cubic>moptipyapps.dynamic_control.controllers.cubic module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.cubic.cubic><code class="docutils literal notranslate"><span class=pre>cubic()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.linear>moptipyapps.dynamic_control.controllers.linear module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.linear.linear><code class="docutils literal notranslate"><span class=pre>linear()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.min_ann>moptipyapps.dynamic_control.controllers.min_ann module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.min_ann.PHI><code class="docutils literal notranslate"><span class=pre>PHI</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.min_ann.min_anns><code class="docutils literal notranslate"><span class=pre>min_anns()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.partially_linear>moptipyapps.dynamic_control.controllers.partially_linear module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.partially_linear.partially_linear><code class="docutils literal notranslate"><span class=pre>partially_linear()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.peaks>moptipyapps.dynamic_control.controllers.peaks module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.peaks.peaks><code class="docutils literal notranslate"><span class=pre>peaks()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.predefined>moptipyapps.dynamic_control.controllers.predefined module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.predefined.predefined><code class="docutils literal notranslate"><span class=pre>predefined()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers.quadratic>moptipyapps.dynamic_control.controllers.quadratic module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#moptipyapps.dynamic_control.controllers.quadratic.quadratic><code class="docutils literal notranslate"><span class=pre>quadratic()</span></code></a></ul></ul><li class=toctree-l1><a class="reference internal"href=moptipyapps.dynamic_control.systems.html>moptipyapps.dynamic_control.systems package</a><ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#submodules>Submodules</a><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#module-moptipyapps.dynamic_control.systems.lorenz>moptipyapps.dynamic_control.systems.lorenz module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.lorenz.LORENZ_111><code class="docutils literal notranslate"><span class=pre>LORENZ_111</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.lorenz.LORENZ_4><code class="docutils literal notranslate"><span class=pre>LORENZ_4</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.lorenz.make_lorenz><code class="docutils literal notranslate"><span class=pre>make_lorenz()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#module-moptipyapps.dynamic_control.systems.stuart_landau>moptipyapps.dynamic_control.systems.stuart_landau module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.stuart_landau.STUART_LANDAU_111><code class="docutils literal notranslate"><span class=pre>STUART_LANDAU_111</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.stuart_landau.STUART_LANDAU_4><code class="docutils literal notranslate"><span class=pre>STUART_LANDAU_4</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.stuart_landau.make_stuart_landau><code class="docutils literal notranslate"><span class=pre>make_stuart_landau()</span></code></a></ul><li class=toctree-l2><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#module-moptipyapps.dynamic_control.systems.three_coupled_oscillators>moptipyapps.dynamic_control.systems.three_coupled_oscillators module</a><ul><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.three_coupled_oscillators.THREE_COUPLED_OSCILLATORS><code class="docutils literal notranslate"><span class=pre>THREE_COUPLED_OSCILLATORS</span></code></a><li class=toctree-l3><a class="reference internal"href=moptipyapps.dynamic_control.systems.html#moptipyapps.dynamic_control.systems.three_coupled_oscillators.make_3_couple_oscillators><code class="docutils literal notranslate"><span class=pre>make_3_couple_oscillators()</span></code></a></ul></ul></ul></div></section><section id=submodules><h2>Submodules<a title="Link to this heading"class=headerlink href=#submodules>¶</a></h2></section><section id=module-moptipyapps.dynamic_control.controller><span id=moptipyapps-dynamic-control-controller-module></span><h2>moptipyapps.dynamic_control.controller module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.controller>¶</a></h2><p>A base class for implementing controllers.<p>A controller basically is a parameterizable function that receives the current state and time of a <a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a> as input and computes one or multiple controller values as output. These controller values are then used to influence how the state of the system changes in the next iteration. In the dynamic systems control optimization task, the goal is to find the right parameterization for the controller such that an <a class="reference internal"href=#module-moptipyapps.dynamic_control.objective title=moptipyapps.dynamic_control.objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>objective</span></code></a> is minimized.<p>Examples for different controllers for dynamic systems are given in package <a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers title=moptipyapps.dynamic_control.controllers><code class="xref py py-mod docutils literal notranslate"><span class=pre>controllers</span></code></a>.<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.controller.</span></span><span class="sig-name descname"><span class=pre>Controller</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>name</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dims</span></span></em>, <em class=sig-param><span class=n><span class=pre>control_dims</span></span></em>, <em class=sig-param><span class=n><span class=pre>param_dims</span></span></em>, <em class=sig-param><span class=n><span class=pre>func</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>None</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/controller.html#Controller><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.component.Component><code class="xref py py-class docutils literal notranslate"><span class=pre>Component</span></code></a></p> <p>A class for governing a system via differential equations.</p> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.control_dims><span class="sig-name descname"><span class=pre>control_dims</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.control_dims>¶</a><dd><p>the dimensions of the controller output</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.controller><span class="sig-name descname"><span class=pre>controller</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>state</span></span></em>, <em class=sig-param><span class=n><span class=pre>time</span></span></em>, <em class=sig-param><span class=n><span class=pre>params</span></span></em>, <em class=sig-param><span class=n><span class=pre>out</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/controller.html#Controller.controller><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.controller>¶</a><dd><p>Compute the control value and store it in <cite>out</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>state</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the state vector<li><p><strong>time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the time value<li><p><strong>params</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the controller variables<li><p><strong>out</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the output array to receive the controller values</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/controller.html#Controller.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.name><span class="sig-name descname"><span class=pre>name</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.name>¶</a><dd><p>the controller name</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.param_dims><span class="sig-name descname"><span class=pre>param_dims</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.param_dims>¶</a><dd><p>the dimensions of the controller parameter</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.parameter_space><span class="sig-name descname"><span class=pre>parameter_space</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/controller.html#Controller.parameter_space><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.parameter_space>¶</a><dd><p>Create a vector space to represent the possible parameterizations.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.spaces.html#moptipy.spaces.vectorspace.VectorSpace><code class="xref py py-class docutils literal notranslate"><span class=pre>VectorSpace</span></code></a></span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>a vector space for the possible parameterizations of this controller.</p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.controller.Controller.state_dims><span class="sig-name descname"><span class=pre>state_dims</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.controller.Controller.state_dims>¶</a><dd><p>the dimensions of the state variable</p></dl></dl></section><section id=module-moptipyapps.dynamic_control.experiment_raw><span id=moptipyapps-dynamic-control-experiment-raw-module></span><h2>moptipyapps.dynamic_control.experiment_raw module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.experiment_raw>¶</a></h2><p>An example experiment for dynamic control.<p>In this experiment, we try to synthesize (i.e., parameterize) controllers (<a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a>) that steer a dynamic system (<a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a>) into a state by using a figure of merit (<a class="reference internal"href=#module-moptipyapps.dynamic_control.objective title=moptipyapps.dynamic_control.objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>objective</span></code></a>) which minimizes both the squared system state and controller effort.<p>A model-based experiment variant is given in <a class="reference internal"href=#module-moptipyapps.dynamic_control.experiment_surrogate title=moptipyapps.dynamic_control.experiment_surrogate><code class="xref py py-mod docutils literal notranslate"><span class=pre>experiment_surrogate</span></code></a>.<dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_raw.base_setup><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_raw.</span></span><span class="sig-name descname"><span class=pre>base_setup</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_raw.html#base_setup><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_raw.base_setup>¶</a><dd><p>Create the basic setup.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></span>) – the instance to use</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.execution.Execution><code class="xref py py-class docutils literal notranslate"><span class=pre>Execution</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the basic execution</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_raw.cmaes><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_raw.</span></span><span class="sig-name descname"><span class=pre>cmaes</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_raw.html#cmaes><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_raw.cmaes>¶</a><dd><p>Create the Bi-Pop-CMA-ES setup.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></span>) – the problem instance</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.execution.Execution><code class="xref py py-class docutils literal notranslate"><span class=pre>Execution</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the setup</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_raw.make_instances><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_raw.</span></span><span class="sig-name descname"><span class=pre>make_instances</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_raw.html#make_instances><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_raw.make_instances>¶</a><dd><p>Create the instances to be used in the dynamic control experiment.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[], <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a>]]</span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>the instances to be used in the dynamic control experiment.</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_raw.on_completion><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_raw.</span></span><span class="sig-name descname"><span class=pre>on_completion</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em>, <em class=sig-param><span class=n><span class=pre>log_file</span></span></em>, <em class=sig-param><span class=n><span class=pre>process</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_raw.html#on_completion><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_raw.on_completion>¶</a><dd><p>Plot the corresponding figures and print the objective value components.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Any><code class="xref py py-data docutils literal notranslate"><span class=pre>Any</span></code></a></span>) – the problem instance<li><p><strong>log_file</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in pycommons v0.8.65)"href=https://thomasweise.github.io/pycommons/pycommons.io.html#pycommons.io.path.Path><code class="xref py py-class docutils literal notranslate"><span class=pre>Path</span></code></a></span>) – the log file<li><p><strong>process</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.process.Process><code class="xref py py-class docutils literal notranslate"><span class=pre>Process</span></code></a></span>) – the process</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_raw.run><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_raw.</span></span><span class="sig-name descname"><span class=pre>run</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>base_dir</span></span></em>, <em class=sig-param><span class=n><span class=pre>n_runs</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>5</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_raw.html#run><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_raw.run>¶</a><dd><p>Run the experiment.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>base_dir</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the base directory<li><p><strong>n_runs</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>5</span></code>) – the number of runs</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></section><section id=module-moptipyapps.dynamic_control.experiment_surrogate><span id=moptipyapps-dynamic-control-experiment-surrogate-module></span><h2>moptipyapps.dynamic_control.experiment_surrogate module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.experiment_surrogate>¶</a></h2><p>An example experiment for dynamic control using surrogate system models.<p>In this experiment, we again try to synthesize (i.e., parameterize) controllers (<a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a>) that steer a dynamic system (<a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a>) into a state by using a figure of merit (<a class="reference internal"href=#module-moptipyapps.dynamic_control.objective title=moptipyapps.dynamic_control.objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>objective</span></code></a>) which minimizes both the squared system state and controller effort.<p>The difference compared to <a class="reference internal"href=#module-moptipyapps.dynamic_control.experiment_raw title=moptipyapps.dynamic_control.experiment_raw><code class="xref py py-mod docutils literal notranslate"><span class=pre>experiment_raw</span></code></a> is that we also try to synthesize a system model at the same time. We employ the procedure detailed in <a class="reference internal"href=#module-moptipyapps.dynamic_control.surrogate_optimizer title=moptipyapps.dynamic_control.surrogate_optimizer><code class="xref py py-mod docutils literal notranslate"><span class=pre>surrogate_optimizer</span></code></a> for this purpose.<p>Word of advice: This experiment takes <strong>extremely long</strong> and needs <strong>a lot of memory</strong>!<p>The starting points of the work here were conversations with Prof. Dr. Bernd NOACK and Guy Yoslan CORNEJO MACEDA of the Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)).<dl class="py data"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.MAX_FES><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>MAX_FES</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Final><span class=pre>Final</span></a><span class=p><span class=pre>[</span></span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><span class=pre>int</span></a><span class=p><span class=pre>]</span></span></em><em class=property><span class=w> </span><span class=p><span class=pre>=</span></span><span class=w> </span><span class=pre>64</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.MAX_FES>¶</a><dd><p>the total objective function evaluations</p></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.base_setup><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>base_setup</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_surrogate.html#base_setup><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.base_setup>¶</a><dd><p>Create the basic setup.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></span>) – the instance to use</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>[<a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.execution.Execution><code class="xref py py-class docutils literal notranslate"><span class=pre>Execution</span></code></a>, <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a>, <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.spaces.html#moptipy.spaces.vectorspace.VectorSpace><code class="xref py py-class docutils literal notranslate"><span class=pre>VectorSpace</span></code></a>]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the basic execution</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.cmaes_raw><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>cmaes_raw</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_surrogate.html#cmaes_raw><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.cmaes_raw>¶</a><dd><p>Create the Bi-Pop-CMA-ES setup.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></span>) – the problem instance</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.execution.Execution><code class="xref py py-class docutils literal notranslate"><span class=pre>Execution</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the setup</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.cmaes_surrogate><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>cmaes_surrogate</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em>, <em class=sig-param><span class=n><span class=pre>fes_for_warmup</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>16</span></span></em>, <em class=sig-param><span class=n><span class=pre>fes_for_training</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>128</span></span></em>, <em class=sig-param><span class=n><span class=pre>fes_per_model_run</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>128</span></span></em>, <em class=sig-param><span class=n><span class=pre>fancy_logs</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>True</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_surrogate.html#cmaes_surrogate><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.cmaes_surrogate>¶</a><dd><p>Create the Bi-Pop-CMA-ES setup.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel title=moptipyapps.dynamic_control.system_model.SystemModel><code class="xref py py-class docutils literal notranslate"><span class=pre>SystemModel</span></code></a></span>) – the problem instance<li><p><strong>fes_for_warmup</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>16</span></code>) – the FEs to be used for warmup<li><p><strong>fes_for_training</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>128</span></code>) – the milliseconds for training<li><p><strong>fes_per_model_run</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>128</span></code>) – the milliseconds per model run<li><p><strong>fancy_logs</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>True</span></code>) – should we do fancy logging?</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.execution.Execution><code class="xref py py-class docutils literal notranslate"><span class=pre>Execution</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the setup</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.make_instances><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>make_instances</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_surrogate.html#make_instances><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.make_instances>¶</a><dd><p>Create the instances to be used in the dynamic control experiment.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[], <a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel title=moptipyapps.dynamic_control.system_model.SystemModel><code class="xref py py-class docutils literal notranslate"><span class=pre>SystemModel</span></code></a>]]</span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>the instances to be used in the dynamic control experiment.</p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.on_completion><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>on_completion</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em>, <em class=sig-param><span class=n><span class=pre>log_file</span></span></em>, <em class=sig-param><span class=n><span class=pre>process</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_surrogate.html#on_completion><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.on_completion>¶</a><dd><p>Plot the corresponding figures and print the objective value components.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>instance</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Any><code class="xref py py-data docutils literal notranslate"><span class=pre>Any</span></code></a></span>) – the problem instance<li><p><strong>log_file</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in pycommons v0.8.65)"href=https://thomasweise.github.io/pycommons/pycommons.io.html#pycommons.io.path.Path><code class="xref py py-class docutils literal notranslate"><span class=pre>Path</span></code></a></span>) – the log file<li><p><strong>process</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.process.Process><code class="xref py py-class docutils literal notranslate"><span class=pre>Process</span></code></a></span>) – the process</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.experiment_surrogate.run><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.experiment_surrogate.</span></span><span class="sig-name descname"><span class=pre>run</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>base_dir</span></span></em>, <em class=sig-param><span class=n><span class=pre>n_runs</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>64</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/experiment_surrogate.html#run><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.experiment_surrogate.run>¶</a><dd><p>Run the experiment.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>base_dir</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the base directory<li><p><strong>n_runs</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>64</span></code>) – the number of runs</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></section><section id=module-moptipyapps.dynamic_control.instance><span id=moptipyapps-dynamic-control-instance-module></span><h2>moptipyapps.dynamic_control.instance module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.instance>¶</a></h2><p>An instance of the dynamic control synthesis problem.<p>An instance of the dynamic control synthesis problem is comprised of two components: a <a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a> of differential equations governing how the state of a system changes over time and a <a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a> that uses the current system state as input and computes a controller value as output that influences the state change. Notice that the controller here is a parametric function. The goal of the dynamic system control is to find the right parameterization of the controller such that an <a class="reference internal"href=#module-moptipyapps.dynamic_control.objective title=moptipyapps.dynamic_control.objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>objective</span></code></a> is minimized. The objective here usually has the goal to bring the dynamic system into a stable state while using as little controller “energy” as possible.<p>An instance of the simultaneous control and model synthesis problem is an instance of the class <a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel title=moptipyapps.dynamic_control.system_model.SystemModel><code class="xref py py-class docutils literal notranslate"><span class=pre>SystemModel</span></code></a>, which is a subclass of <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a>. It also adds a controller blueprint for modelling the systems response (state differential) based on the system state and controller output.<p>The starting point of the work here were conversations with Prof. Dr. Bernd NOACK and Guy Yoslan CORNEJO MACEDA of the Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)).<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.instance.Instance><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.instance.</span></span><span class="sig-name descname"><span class=pre>Instance</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>system</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller</span></span></em>, <em class=sig-param><span class=n><span class=pre>name_base</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>None</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/instance.html#Instance><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.instance.Instance>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.component.Component><code class="xref py py-class docutils literal notranslate"><span class=pre>Component</span></code></a></p> <p>An instance of the dynamic control problem.</p> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.instance.Instance.controller><span class="sig-name descname"><span class=pre>controller</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller title=moptipyapps.dynamic_control.controller.Controller><code class="xref py py-class docutils literal notranslate"><span class=pre>Controller</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.instance.Instance.controller>¶</a><dd><p>the controller applied to the system</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.instance.Instance.describe_parameterization><span class="sig-name descname"><span class=pre>describe_parameterization</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>title</span></span></em>, <em class=sig-param><span class=n><span class=pre>parameters</span></span></em>, <em class=sig-param><span class=n><span class=pre>base_name</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest_dir</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/instance.html#Instance.describe_parameterization><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.instance.Instance.describe_parameterization>¶</a><dd><p>Describe the performance of a given system of system.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>title</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a> | <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span>) – the optional title<li><p><strong>parameters</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the controller parameters<li><p><strong>base_name</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the base name of the file to produce<li><p><strong>dest_dir</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the destination directory</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>[<a class="reference external"title="(in pycommons v0.8.65)"href=https://thomasweise.github.io/pycommons/pycommons.io.html#pycommons.io.path.Path><code class="xref py py-class docutils literal notranslate"><span class=pre>Path</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a>]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the paths of the generated files</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.instance.Instance.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/instance.html#Instance.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.instance.Instance.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.instance.Instance.name><span class="sig-name descname"><span class=pre>name</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.instance.Instance.name>¶</a><dd><p>the name of this instance</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.instance.Instance.system><span class="sig-name descname"><span class=pre>system</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference internal"href=#moptipyapps.dynamic_control.system.System title=moptipyapps.dynamic_control.system.System><code class="xref py py-class docutils literal notranslate"><span class=pre>System</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.instance.Instance.system>¶</a><dd><p>the system governing the dynamic system</p></dl></dl></section><section id=module-moptipyapps.dynamic_control.model_objective><span id=moptipyapps-dynamic-control-model-objective-module></span><h2>moptipyapps.dynamic_control.model_objective module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.model_objective>¶</a></h2><p>An objective function that can be used to synthesize system models.<p>We consider the dynamic system to be a function <cite>D(s, c) = ds/dt</cite>, where<ul class=simple><li><p><cite>s</cite> is the state vector (e.g., two-dimensional for the Stuart-Landau system, see <a class="reference internal"href=moptipyapps.dynamic_control.systems.html#module-moptipyapps.dynamic_control.systems.stuart_landau title=moptipyapps.dynamic_control.systems.stuart_landau><code class="xref py py-mod docutils literal notranslate"><span class=pre>stuart_landau</span></code></a>, and three-dimensional for the Lorenz system, see <a class="reference internal"href=moptipyapps.dynamic_control.systems.html#module-moptipyapps.dynamic_control.systems.lorenz title=moptipyapps.dynamic_control.systems.lorenz><code class="xref py py-mod docutils literal notranslate"><span class=pre>lorenz</span></code></a>),<li><p><cite>c</cite> is the control vector (one-dimensional in both cases), and<li><p><cite>ds/dt</cite> is the state differential (again two respectively three-dimensional).</ul><p>The <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a> objective function allows us to collect tuples of <cite>(s,c)</cite> and <cite>ds/dt</cite> vectors. So all we need to do is to train a model <cite>M</cite> that receives as input a vector <cite>x=(s,c)</cite> (where <cite>(s,c)</cite> be the concatenation of <cite>s</cite> and <cite>c</cite>) and fill as output a vector <cite>ds/dt</cite>.<p>The objective function in this module minimizes the root mean square error over the model-computed <cite>ds/dt</cite> vectors and the actual <cite>ds/dt</cite> vectors. The model objective function is used by the <a class="reference internal"href=#module-moptipyapps.dynamic_control.surrogate_optimizer title=moptipyapps.dynamic_control.surrogate_optimizer><code class="xref py py-mod docutils literal notranslate"><span class=pre>surrogate_optimizer</span></code></a> algorithm.<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.model_objective.ModelObjective><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.model_objective.</span></span><span class="sig-name descname"><span class=pre>ModelObjective</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>real</span></span></em>, <em class=sig-param><span class=n><span class=pre>model</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/model_objective.html#ModelObjective><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.model_objective.ModelObjective>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.objective.Objective><code class="xref py py-class docutils literal notranslate"><span class=pre>Objective</span></code></a></p> <p>The objective for modeling.</p> <p>This objective function works on sequences of tuples <cite>(s, c)</cite> of the system state <cite>s</cite> and controller output <cite>c</cite> as well as the corresponding <cite>ds/dt</cite> differentials. The goal is to train a model <cite>M(s, c, q)</cite> that will compute the <cite>ds/dt</cite> values reasonably accurately. The model is parameterized with some vector <cite>q</cite>, think of <cite>M</cite> being, e.g., an artificial neural network and <cite>q</cite> being its weight vector. To find good values of <cite>q</cite>, this objective here computes the squared differences between the values <cite>M(s, c, q)</cite> and the expected outputs <cite>ds/dt</cite>.</p> <p>These squared differences are then either averaged directly or the <cite>expm1(mean(logp1(…))))</cite> hack of the <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMeritLE title=moptipyapps.dynamic_control.objective.FigureOfMeritLE><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMeritLE</span></code></a> is used to alleviate the impact of large differentials, depending on which “real” (controller-synthesis) objective is passed into the constructor).</p> <p>The tuples <cite>(s, c)</cite> and <cite>ds/dt</cite> are pulled from the real objective with the method <a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective.begin title=moptipyapps.dynamic_control.model_objective.ModelObjective.begin><code class="xref py py-meth docutils literal notranslate"><span class=pre>begin()</span></code></a>. The <cite>ds/dt</cite> rows are flattened for performance reasons.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.model_objective.ModelObjective.begin><span class="sig-name descname"><span class=pre>begin</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/model_objective.html#ModelObjective.begin><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.model_objective.ModelObjective.begin>¶</a><dd><p>Begin a model optimization run.</p> <p>This function pulls the training data from the actual controller-synthesis objective function, which is an instance of <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a>, via the method <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials title=moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials><code class="xref py py-meth docutils literal notranslate"><span class=pre>get_differentials()</span></code></a> and allocates internal data structures accordingly.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.model_objective.ModelObjective.end><span class="sig-name descname"><span class=pre>end</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/model_objective.html#ModelObjective.end><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.model_objective.ModelObjective.end>¶</a><dd><p>End a model optimization run and free the associated memory.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.model_objective.ModelObjective.evaluate><span class="sig-name descname"><span class=pre>evaluate</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/model_objective.html#ModelObjective.evaluate><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.model_objective.ModelObjective.evaluate>¶</a><dd><p>Evaluate a model parameterization.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the model parameterization</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the objective value</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.model_objective.ModelObjective.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/model_objective.html#ModelObjective.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.model_objective.ModelObjective.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.model_objective.ModelObjective.lower_bound><span class="sig-name descname"><span class=pre>lower_bound</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/model_objective.html#ModelObjective.lower_bound><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.model_objective.ModelObjective.lower_bound>¶</a><dd><p>Get the lower bound of the model objective, which is <cite>0</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>0.0</p></dl></dl></dl></section><section id=module-moptipyapps.dynamic_control.objective><span id=moptipyapps-dynamic-control-objective-module></span><h2>moptipyapps.dynamic_control.objective module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.objective>¶</a></h2><p>An objective functions for the dynamic control problem.<p>The dynamic control problem means that our system starts in a given state and we try to move it to a stable state by using control effort. Controllers are trained over several training states, for each of which we can compute a figure of merit.<p>We offer two different approaches for this:<ul class=simple><li><p><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a> computes the arithmetic mean <cite>z</cite> over the separate figures of merit <cite>J</cite> of the training cases.<li><p><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMeritLE title=moptipyapps.dynamic_control.objective.FigureOfMeritLE><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMeritLE</span></code></a> tries to smooth out the impact of bad starting states by computing <cite>exp(mean[log(J + 1)]) - 1</cite>.</ul><p>These objective functions also offer a way to collect the state+control and corresponding differential vectors.<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.objective.</span></span><span class="sig-name descname"><span class=pre>FigureOfMerit</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em>, <em class=sig-param><span class=n><span class=pre>supports_model_mode</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>False</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.objective.Objective><code class="xref py py-class docutils literal notranslate"><span class=pre>Objective</span></code></a></p> <p>A base class for figures of merit.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.evaluate><span class="sig-name descname"><span class=pre>evaluate</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.evaluate><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.evaluate>¶</a><dd><p>Evaluate the parameterization of a controller.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>x</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the controller parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the figure of merit</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials><span class="sig-name descname"><span class=pre>get_differentials</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.get_differentials><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials>¶</a><dd><p>Get the collected differentials.</p> <p>If <cite>supports_model_mode</cite> was set to <cite>True</cite> in the creating of this objective function, then the system will gather tuples <cite>(s, c)</cite> and <cite>ds/dt</cite> when in raw mode (see <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_raw()</span></code></a>) and make them available here to train system models (see <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_model title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_model><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_model()</span></code></a>). Notice that gathering training data is a very memory intense process.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>]</span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>the collected differentials</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.initialize><span class="sig-name descname"><span class=pre>initialize</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.initialize><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.initialize>¶</a><dd><p>Initialize the objective for use.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.instance><span class="sig-name descname"><span class=pre>instance</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.instance>¶</a><dd><p>the dynamic control instance</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.lower_bound><span class="sig-name descname"><span class=pre>lower_bound</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.lower_bound><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.lower_bound>¶</a><dd><p>Get the lower bound of the figure of merit, which is 0.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-even>Returns<span class=colon>:</span><dd class=field-even><p>0.0</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.set_model><span class="sig-name descname"><span class=pre>set_model</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>equations</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.set_model><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_model>¶</a><dd><p>Set the model-driven mode for the evaluation.</p> <p>In this modus, the internal system equations are replaced by the callable <cite>equations</cite> passed into this function and the data collection is stopped. The idea is that <cite>equations</cite> could be a model synthesized on the data gathered (see <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials title=moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials><code class="xref py py-meth docutils literal notranslate"><span class=pre>get_differentials()</span></code></a>) and thus does not represent the actual dynamic system but a model thereof. We could synthesize a controller for this model and for this purpose would use the exactly same objective function – just instead of using the actual system equations, we use the system model. Of course, we then need to deactivate the data gathering mechanism (see again <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials title=moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials><code class="xref py py-meth docutils literal notranslate"><span class=pre>get_differentials()</span></code></a>), because the data would then not be real system data. You can toggle back to the actual system using <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_raw()</span></code></a>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>equations</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span>) – the equations to be used instead of the actual system’s differential equations.</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw><span class="sig-name descname"><span class=pre>set_raw</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.set_raw><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw>¶</a><dd><p>Let this objective work on the original system equations.</p> <p>The objective function here can be used in two modi: a) based on the original systems model, as given in <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.system title=moptipyapps.dynamic_control.instance.Instance.system><code class="xref py py-attr docutils literal notranslate"><span class=pre>system</span></code></a>, or b) on a learned model of the system. This function here toggles to the former mode, i.e., to the actual system mode. In this modus, training data for training the system model will be gathered if the objective function is configured to do so. In that case, you can toggle to model mode via <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_model title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_model><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_model()</span></code></a>.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMerit.sum_up_results><span class="sig-name descname"><span class=pre>sum_up_results</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>results</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMerit.sum_up_results><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMerit.sum_up_results>¶</a><dd><p>Compute the final objective value from several single <cite>J</cite> values.</p> <p>When synthesizing controllers, we do not just apply them to a single simulation run. Instead, we use multiple training cases (see <a class="reference internal"href=#moptipyapps.dynamic_control.system.System.training_starting_states title=moptipyapps.dynamic_control.system.System.training_starting_states><code class="xref py py-attr docutils literal notranslate"><span class=pre>training_starting_states</span></code></a>) and perform <a class="reference internal"href=#moptipyapps.dynamic_control.system.System.training_steps title=moptipyapps.dynamic_control.system.System.training_steps><code class="xref py py-attr docutils literal notranslate"><span class=pre>training_steps</span></code></a> simulation steps on each of them. Each such training starting state will result in a single <cite>J</cite> value, which is the sum of squared state and control values. We now compute the end objective value from these different <cite>J</cite> values by using this function here.</p> <p>This will <em>destroy</em> the contents of <cite>results</cite>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>results</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array of <cite>J</cite> values</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the final result</p></dl></dl></dl><dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMeritLE><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.objective.</span></span><span class="sig-name descname"><span class=pre>FigureOfMeritLE</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>instance</span></span></em>, <em class=sig-param><span class=n><span class=pre>supports_model_mode</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>False</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMeritLE><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMeritLE>¶</a><dd><p>Bases: <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a></p> <p>Compute a <cite>exp(mean(log(z+1)))-1</cite> over the figures of merit <cite>z</cite>.</p> <p>Different from <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a>, we compute the mean of <cite>log(z + 1)</cite> where <cite>z</cite> be the figures of merit of the single training cases. We then return <cite>exp(mean[log(z + 1)]) - 1</cite> as final result. The goal is to reduce the impact of training cases that require more control effort.</p> <p>If we solve the dynamic control problem for diverse training cases, then we may have some very easy cases, where the system just needs a small control impulse to move into a stable and cheap state. Others may have very far out and expensive starting states that require lots of control efforts to be corrected. If we simply average over all states, then these expensive states will dominate whatever good we are doing in the cheap states. Averaging over the <cite>log(J+1)</cite> reduces such impact. We then compute <cite>exp[…]-1</cite> of the result as cosmetics to get back into the original range of the figure of merits.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.objective.FigureOfMeritLE.sum_up_results><span class="sig-name descname"><span class=pre>sum_up_results</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>results</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/objective.html#FigureOfMeritLE.sum_up_results><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.objective.FigureOfMeritLE.sum_up_results>¶</a><dd><p>Compute the final objective value from several single <cite>J</cite> values.</p> <p>For each training case, there is one basic figure of merit <cite>J</cite> and here we compute <cite>exp(mean[log(J + 1)]) - 1</cite> over all of these values.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>results</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array of <cite>J</cite> values</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the final result</p></dl></dl></dl></section><section id=module-moptipyapps.dynamic_control.ode><span id=moptipyapps-dynamic-control-ode-module></span><h2>moptipyapps.dynamic_control.ode module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.ode>¶</a></h2><p>A primitive integrator for systems of ordinary differential equations.<p>Many dynamic systems can be modeled as systems of ordinary differential equations that govern their progress over time. Trying to find out in which state such systems are at a given point in time means to integrate these equations until that point in time (starting from a starting state).<p>What we want to play around with, however, is synthesizing controllers. In this case, the differential equations also merge the output of the controller with the current state. If the controller behaves inappropriately, this may make the system diverge, i.e., some of its state variables go to infinity over time or sometimes rather quickly.<p>Using ODE integrators that compute the system state at pre-defined time steps is thus cumbersome, as the system may have already exploded at these goal times. Therefore, we perform ODE integration in several steps. First, we try it the “normal” way. However, as soon as the system escapes the sane parameter range, we stop. We then use the last point where the system was stable and the first point where it escaped the reasonable range to estimate a new reasonable end time for the integration. We do this until we finally succeed.<p>Thus, we can simulate a well-behaved system over a long time and an ill-behaved system for a shorter time period. Neither system will diverge.<p>The following functions are provided:<ul class=simple><li><p><a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> executes a set of differential system equations and controller equations and returns an array with the system state, controller output, and time at the different interpolation steps.<li><p><a class="reference internal"href=#moptipyapps.dynamic_control.ode.t_from_ode title=moptipyapps.dynamic_control.ode.t_from_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>t_from_ode()</span></code></a> returns the total time over which the result of <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> was simulated.<li><p><a class="reference internal"href=#moptipyapps.dynamic_control.ode.j_from_ode title=moptipyapps.dynamic_control.ode.j_from_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>j_from_ode()</span></code></a> returns a figure of merit, i.e., a weighted sum of (a part of) the system state and the controller output from the result of <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a>.<li><p><a class="reference internal"href=#moptipyapps.dynamic_control.ode.diff_from_ode title=moptipyapps.dynamic_control.ode.diff_from_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>diff_from_ode()</span></code></a> extracts state difference information from the result of <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a>.</ul><dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.ode.T><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.ode.</span></span><span class="sig-name descname"><span class=pre>T</span></span><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.ode.T>¶</a><dd><p>the type variable for ODE controller parameters</p> <p>alias of TypeVar(‘T’)</p></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.ode.diff_from_ode><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.ode.</span></span><span class="sig-name descname"><span class=pre>diff_from_ode</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>ode</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dim</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/ode.html#diff_from_ode><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.ode.diff_from_ode>¶</a><dd><p>Compute all the state+control vectors and the resulting differentials.</p> <p>This function returns two matrices. Each row of both matrices corresponds to a time slot. Each row in the first matrix holds the state vector and the control vector (that was computed by the controller). The corresponding row in the second matrix then holds the state differential resulting from the control vector being applied in the differential equations that govern the system state change.</p> <p>The idea is that this function basically provides the data that we would like to learn when training a surrogate model for a system: From the current state and the computed control vector, we want that our model can give us the resulting system differential. If we have such a model and it works reasonably well, then we could essentially plug this model into <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> instead of the original <cite>equations</cite> parameter.</p> <p>What this function does to compute the differential is to basically “invert” the dynamic weighting done by <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a>. <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> starts in a given starting state <cite>s</cite>. It then computes the control vector <cite>c</cite> as a function of <cite>s</cite>, i.e., <cite>c(s)</cite>. Then, the equations of the dynamic system (see module <a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a>) to compute the state differential <cite>D=ds/dt</cite> as a function of <cite>c(s)</cite> and <cite>s</cite>, i.e., as something like <cite>D(s, c(s))</cite>. The next step would be to update the state, i.e., to set <cite>s=s+D(s, c(s))</cite>. Unfortunately, this can make <cite>s</cite> go to infinity. So <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> will compute a dynamic weight <cite>w</cite> and do <cite>s=s+w*D(s, c(s))</cite>, where <cite>w</cite> is chosen such that the state vector <cite>s</cite> does not grow unboundedly. While <cite>s</cite> and <cite>c(s)</cite> and <cite>w</cite> are stored in one row of the result matrix of <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a>, <cite>s+w*D(s,c(s))</cite> is stored as state <cite>s</cite> in the next row. So what this function here basically does is to subtract the old state from the next state and divide the result by <cite>w</cite> to get <cite>D(s, c(s))</cite>. <cite>s</cite> and <cite>c(s)</cite> are already available directly in the ODE result and <cite>w</cite> is not needed anymore.</p> <p>We then get the rows <cite>s, c(s)</cite> and <cite>D(s, c(s))</cite> in the first and second result matrix, respectively. This can then be used to train a system model as proposed in model <a class="reference internal"href=#module-moptipyapps.dynamic_control.system_model title=moptipyapps.dynamic_control.system_model><code class="xref py py-mod docutils literal notranslate"><span class=pre>system_model</span></code></a>.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>ode</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the result of <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a><li><p><strong>state_dim</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the state dimensions</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>a tuple of the state+control vectors and the resulting state differential vectors</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>od</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>  <span class=c1># state 0,0,0; control 0,0; time 0</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>  <span class=c1># state 1,2,3; control 4,5; time 1</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>  <span class=c1># state 2,3,4; control 5,6; time 3</span>
<span class=gp>... </span>    <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>7</span><span class=p>]])</span>    <span class=c1># state 4,6,8; control 7,7, time 7</span>
<span class=gp>>>> </span><span class=n>res</span> <span class=o>=</span> <span class=n>diff_from_ode</span><span class=p>(</span><span class=n>od</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>res</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>  <span class=c1># state and control vectors, time col and last row removed</span>
<span class=go>array([[0, 0, 0, 0, 0],</span>
<span class=go>       [1, 2, 3, 4, 5],</span>
<span class=go>       [2, 3, 4, 5, 6]])</span>
<span class=gp>>>> </span><span class=n>res</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>  <span class=c1># (state[i + 1] - state[i]) / (time[i + 1] / time[i])</span>
<span class=go>array([[1.  , 2.  , 3.  ],</span>
<span class=go>       [0.5 , 0.5 , 0.5 ],</span>
<span class=go>       [0.5 , 0.75, 1.  ]])</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.ode.j_from_ode><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.ode.</span></span><span class="sig-name descname"><span class=pre>j_from_ode</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>ode</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dim</span></span></em>, <em class=sig-param><span class=n><span class=pre>use_state_dims</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>-1</span></span></em>, <em class=sig-param><span class=n><span class=pre>gamma</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>0.1</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/ode.html#j_from_ode><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.ode.j_from_ode>¶</a><dd><p>Compute the original figure of merit from an ODE array.</p> <p>The figure of merit is the sum of state variable squares plus 0.1 times the control variable squares. We disregard the state variable values of the starting states (because they are the same for all controllers on a given training case and because the control cannot influence them) and we also disregard the final state and final controller output (as there is no time slice associated with them, i.e., we only “arrive” in them but basically spent 0 time in them in our simulation).</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>ode</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the array returned by the ODE function, i.e., <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a><li><p><strong>state_dim</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the state dimension<li><p><strong>use_state_dims</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>-1</span></code>) – the dimension until which the state is used, <cite>-1</cite> for using the complete state<li><p><strong>gamma</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>0.1</span></code>) – the weight of the controller input</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the figure of merit</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>od</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
<span class=gp>... </span>               <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
<span class=gp>... </span>               <span class=p>[</span><span class=mi>9</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>
<span class=gp>... </span>               <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>7</span><span class=p>]])</span>
<span class=gp>>>> </span><span class=n>sta_dim</span> <span class=o>=</span> <span class=mi>3</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>j_from_ode</span><span class=p>(</span><span class=n>od</span><span class=p>,</span><span class=w> </span><span class=n>sta_dim</span><span class=p>)</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>110.0000000000</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>((</span><span class=mf>1.6</span> <span class=o>+</span> <span class=mf>12.8</span> <span class=o>+</span> <span class=mi>98</span> <span class=o>+</span> <span class=mi>72</span> <span class=o>+</span> <span class=mi>50</span> <span class=o>+</span> <span class=mf>3.6</span> <span class=o>+</span> <span class=mi>64</span> <span class=o>+</span> <span class=mi>144</span> <span class=o>+</span> <span class=mi>324</span><span class=p>)</span> <span class=o>/</span> <span class=mi>7</span><span class=p>)</span>
<span class=go>110.0</span>
<span class=gp>>>> </span><span class=n>sta_dim</span> <span class=o>=</span> <span class=mi>3</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>j_from_ode</span><span class=p>(</span><span class=n>od</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mf>0.5</span><span class=p>)</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>97.1428571429</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>((</span><span class=mi>8</span> <span class=o>+</span> <span class=mi>64</span> <span class=o>+</span> <span class=mi>72</span> <span class=o>+</span> <span class=mi>50</span> <span class=o>+</span> <span class=mi>18</span> <span class=o>+</span> <span class=mi>144</span> <span class=o>+</span> <span class=mi>324</span><span class=p>)</span> <span class=o>/</span> <span class=mi>7</span><span class=p>)</span>
<span class=go>97.14285714285714</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.ode.multi_run_ode><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.ode.</span></span><span class="sig-name descname"><span class=pre>multi_run_ode</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>test_starting_states</span></span></em>, <em class=sig-param><span class=n><span class=pre>training_starting_states</span></span></em>, <em class=sig-param><span class=n><span class=pre>collector</span></span></em>, <em class=sig-param><span class=n><span class=pre>equations</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller</span></span></em>, <em class=sig-param><span class=n><span class=pre>parameters</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller_dim</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>1</span></span></em>, <em class=sig-param><span class=n><span class=pre>test_steps</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>5000</span></span></em>, <em class=sig-param><span class=n><span class=pre>test_time</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>50.0</span></span></em>, <em class=sig-param><span class=n><span class=pre>training_steps</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>5000</span></span></em>, <em class=sig-param><span class=n><span class=pre>training_time</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>50.0</span></span></em>, <em class=sig-param><span class=n><span class=pre>use_state_dims</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>-1</span></span></em>, <em class=sig-param><span class=n><span class=pre>gamma</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>0.1</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/ode.html#multi_run_ode><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.ode.multi_run_ode>¶</a><dd><p>Invoke <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> multiple times and pass the result to <cite>collector</cite>.</p> <p>This function allows us to perform multiple runs of the differential equation simulator, using different starting points. It also allows us to distinguish training and test points and to assign them different numbers of steps. For each of them, <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a> will be applied and the returned matrix is passed to the <cite>collector</cite> function.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>test_starting_states</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>]</span>) – the iterable of test starting states<li><p><strong>training_starting_states</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>]</span>) – the iterable of training starting states<li><p><strong>collector</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Union><code class="xref py py-data docutils literal notranslate"><span class=pre>Union</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]]]</span>) – the destination to receive the results, in the form of index, ode array, j, and t.<li><p><strong>equations</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span>) – the differential system<li><p><strong>controller</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>), <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span>) – the controller function<li><p><strong>parameters</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)</span>) – the controller parameters<li><p><strong>controller_dim</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>1</span></code>) – the dimension of the controller result<li><p><strong>test_steps</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>5000</span></code>) – the number of test steps to simulate<li><p><strong>test_time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>50.0</span></code>) – the time limit for tests<li><p><strong>training_steps</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>5000</span></code>) – the number of training steps to simulate<li><p><strong>training_time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>50.0</span></code>) – the time limit for training<li><p><strong>use_state_dims</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>-1</span></code>) – the dimension until which the state is used, <cite>-1</cite> for using the complete state<li><p><strong>gamma</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>0.1</span></code>) – the weight of the controller input</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.ode.run_ode><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.ode.</span></span><span class="sig-name descname"><span class=pre>run_ode</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>starting_state</span></span></em>, <em class=sig-param><span class=n><span class=pre>equations</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller</span></span></em>, <em class=sig-param><span class=n><span class=pre>parameters</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller_dim</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>1</span></span></em>, <em class=sig-param><span class=n><span class=pre>steps</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>5000</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_time</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>50.0</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/ode.html#run_ode><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.ode.run_ode>¶</a><dd><p>Simulate a set of controlled differential system.</p> <p>The system begins in the starting state stored in the vector <cite>starting_state</cite>. In each time step, first, the <cite>controller</cite> is invoked. It receives the current system state vector as input, the current time <cite>t</cite>, its parameters (<cite>parameters</cite>), and an output array to store its computed control values into. This array has dimension <cite>controller_dim</cite>, which usually is <cite>1</cite>. Then, the function <cite>system</cite> will be called and receives the current state vector, the time step <cite>t</cite>, and the controller output as input, as well as an output array to store the result of the differential into. This output array has the same dimension as the state vector.</p> <p>Now the <cite>run_ode</cite> function simulates such a system over <cite>steps</cite> time steps over the closed interval <cite>[0, max_time]</cite>. If both the system and the controller are well-behaved, then the output array will contain <cite>steps</cite> rows with the state, controller, and time information of each step. If the system diverges at some point in time but we can simulate it reasonably well before that, then we try to simulate <cite>steps</cite>, but on a shorter time frame. If even that fails, you will get a single row output with <cite>1e100</cite> as the controller value.</p> <p>This function returns a matrix where each row corresponds to a simulated time step. Each row contains three components in a concatenated fashion: 1. the state vector, 2. the control vector, 3. the time value</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>starting_state</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the starting<li><p><strong>equations</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span>) – the differential system<li><p><strong>controller</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>), <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span>) – the controller function<li><p><strong>parameters</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)</span>) – the controller parameters<li><p><strong>controller_dim</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>1</span></code>) – the dimension of the controller result<li><p><strong>steps</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>5000</span></code>) – the number of steps to simulate<li><p><strong>max_time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>50.0</span></code>) – the maximum time to simulate for</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>a matrix where each row represents a point in time, composed of the current state, the controller output, and the length of the time slice</p></dl> <p>If we simulate the flight of a projectile with our ODE execution, then both the flight time as well as the flight length are about 0.12% off from what the mathematical solution of the flight system prescribe. That’s actually not bad for a crude and fast integration method…</p> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>v</span> <span class=o>=</span> <span class=mf>100.0</span>
<span class=gp>>>> </span><span class=n>angle</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>deg2rad</span><span class=p>(</span><span class=mf>45.0</span><span class=p>)</span>
<span class=gp>>>> </span><span class=n>v_x</span> <span class=o>=</span> <span class=n>v</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>angle</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>v_x</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>70.7106781187</span>
<span class=gp>>>> </span><span class=n>v_y</span> <span class=o>=</span> <span class=n>v</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>angle</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>v_y</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>70.7106781187</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>projectile</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>ctrl</span><span class=p>,</span> <span class=n>out</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>out</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>70.71067811865474</span>
<span class=gp>... </span>    <span class=n>out</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mf>70.71067811865474</span> <span class=o>-</span> <span class=n>ttime</span> <span class=o>*</span> <span class=mf>9.80665</span>
<span class=gp>>>> </span><span class=n>param</span> <span class=o>=</span> <span class=mf>0.0</span>   <span class=c1># ignore</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>contrl</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>params</span><span class=p>,</span> <span class=n>dest</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>dest</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>0.0</span>  <span class=c1>#  controller that does nothing</span>
<span class=gp>>>> </span><span class=n>strt</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>])</span>
<span class=gp>>>> </span><span class=n>ode</span> <span class=o>=</span> <span class=n>run_ode</span><span class=p>(</span><span class=n>strt</span><span class=p>,</span> <span class=n>projectile</span><span class=p>,</span> <span class=n>contrl</span><span class=p>,</span> <span class=n>param</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ode</span><span class=p>))</span>
<span class=go>10000</span>
<span class=gp>>>> </span><span class=n>time_of_flight</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>v_y</span> <span class=o>/</span> <span class=mf>9.80665</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>time_of_flight</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>14.4209649817</span>
<span class=gp>>>> </span><span class=n>travel_distance_x</span> <span class=o>=</span> <span class=n>time_of_flight</span> <span class=o>*</span> <span class=n>v_x</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>travel_distance_x</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>1019.7162129779</span>
<span class=gp>>>> </span><span class=n>idx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>argwhere</span><span class=p>(</span><span class=n>ode</span><span class=p>[:,</span> <span class=mi>1</span><span class=p>]</span> <span class=o><=</span> <span class=mf>0.0</span><span class=p>)[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>idx</span><span class=p>)</span>
<span class=go>2887</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>ode</span><span class=p>[</span><span class=n>idx</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>]</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>1020.4571309653</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>ode</span><span class=p>[</span><span class=n>idx</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>]</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>1020.8107197148</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>ode</span><span class=p>[</span><span class=n>idx</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>14.4314431443</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>ode</span><span class=p>[</span><span class=n>idx</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=si>:</span><span class=s2>.10f</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=go>14.4364436444</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ode</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>])</span>
<span class=go>50.0</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>contrl2</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>params</span><span class=p>,</span> <span class=n>dest</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>dest</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>1e50</span>  <span class=c1>#  controller that is ill-behaved</span>
<span class=gp>>>> </span><span class=n>run_ode</span><span class=p>(</span><span class=n>strt</span><span class=p>,</span> <span class=n>projectile</span><span class=p>,</span> <span class=n>contrl2</span><span class=p>,</span> <span class=n>param</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>)</span>
<span class=go>array([[0.e+000, 1.e+000, 1.e+100, 0.e+000]])</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>contrl3</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>params</span><span class=p>,</span> <span class=n>dest</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>dest</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>1e50</span> <span class=k>if</span> <span class=n>ttime</span> <span class=o>></span> <span class=mi>10</span> <span class=k>else</span> <span class=mf>0.0</span>  <span class=c1># diverging controller</span>
<span class=gp>>>> </span><span class=n>ode</span> <span class=o>=</span> <span class=n>run_ode</span><span class=p>(</span><span class=n>strt</span><span class=p>,</span> <span class=n>projectile</span><span class=p>,</span> <span class=n>contrl3</span><span class=p>,</span> <span class=n>param</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ode</span><span class=p>))</span>
<span class=go>10000</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ode</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
<span class=go>[690.10677249 224.06765771   0.           9.75958357]</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>projectile2</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>ctrl</span><span class=p>,</span> <span class=n>out</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>out</span><span class=p>[:]</span> <span class=o>=</span> <span class=mi>0</span>
<span class=gp>>>> </span><span class=n>ode</span> <span class=o>=</span> <span class=n>run_ode</span><span class=p>(</span><span class=n>strt</span><span class=p>,</span> <span class=n>projectile2</span><span class=p>,</span> <span class=n>contrl</span><span class=p>,</span> <span class=n>param</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ode</span><span class=p>))</span>
<span class=go>10000</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ode</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
<span class=go>[ 0.  1.  0. 50.]</span>
<span class=gp>>>> </span><span class=n>ode</span> <span class=o>=</span> <span class=n>run_ode</span><span class=p>(</span><span class=n>strt</span><span class=p>,</span> <span class=n>projectile2</span><span class=p>,</span> <span class=n>contrl3</span><span class=p>,</span> <span class=n>param</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>ode</span><span class=p>))</span>
<span class=go>10000</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ode</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
<span class=go>[0.         1.         0.         9.41234557]</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.ode.t_from_ode><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.ode.</span></span><span class="sig-name descname"><span class=pre>t_from_ode</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>ode</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/ode.html#t_from_ode><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.ode.t_from_ode>¶</a><dd><p>Get the time sum from an ODE solution.</p> <p>The total time that we simulate a system depends on the behavior of the system.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>ode</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the ODE solution, as return from <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a>.</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the total consumed time</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>od</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>],</span>
<span class=gp>... </span>               <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>],</span>
<span class=gp>... </span>               <span class=p>[</span><span class=mi>9</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>],</span>
<span class=gp>... </span>               <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>0.4</span><span class=p>]])</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>t_from_ode</span><span class=p>(</span><span class=n>od</span><span class=p>))</span>
<span class=go>0.4</span>
</pre></div></div></dl></section><section id=module-moptipyapps.dynamic_control.results_log><span id=moptipyapps-dynamic-control-results-log-module></span><h2>moptipyapps.dynamic_control.results_log module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.results_log>¶</a></h2><p>A logger for results gathered from ODE integration to a text file.<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_log.ResultsLog><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.results_log.</span></span><span class="sig-name descname"><span class=pre>ResultsLog</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>state_dim</span></span></em>, <em class=sig-param><span class=n><span class=pre>out</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/results_log.html#ResultsLog><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_log.ResultsLog>¶</a><dd><p>Bases: <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/contextlib.html#contextlib.AbstractContextManager><code class="xref py py-class docutils literal notranslate"><span class=pre>AbstractContextManager</span></code></a></p> <p>A class for logging results via <cite>multi_run_ode</cite>.</p> <p>Function <a class="reference internal"href=#moptipyapps.dynamic_control.ode.multi_run_ode title=moptipyapps.dynamic_control.ode.multi_run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>moptipyapps.dynamic_control.ode.multi_run_ode()</span></code></a> can pass its results to various output generating procedures. This class here offers a procedure for writing them to a log file.</p> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>projectile</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>ctrl</span><span class=p>,</span> <span class=n>out</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>out</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mf>70.71067811865474</span>
<span class=gp>... </span>    <span class=n>out</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mf>70.71067811865474</span> <span class=o>-</span> <span class=n>ttime</span> <span class=o>*</span> <span class=mf>9.80665</span>
<span class=gp>>>> </span><span class=n>param</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>])</span>   <span class=c1># ignore</span>
<span class=gp>>>> </span><span class=k>def</span><span class=w> </span><span class=nf>contrl</span><span class=p>(</span><span class=n>position</span><span class=p>,</span> <span class=n>ttime</span><span class=p>,</span> <span class=n>params</span><span class=p>,</span> <span class=n>dest</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>dest</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>params</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>  <span class=c1>#  controller that returns param</span>
<span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>io</span><span class=w> </span><span class=kn>import</span> <span class=n>StringIO</span>
<span class=gp>>>> </span><span class=kn>from</span><span class=w> </span><span class=nn>moptipyapps.dynamic_control.ode</span><span class=w> </span><span class=kn>import</span> <span class=n>multi_run_ode</span>
<span class=gp>>>> </span><span class=k>with</span> <span class=n>StringIO</span><span class=p>()</span> <span class=k>as</span> <span class=n>sio</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>with</span> <span class=n>ResultsLog</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>sio</span><span class=p>)</span> <span class=k>as</span> <span class=n>log</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>multi_run_ode</span><span class=p>([</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>])],</span>
<span class=gp>... </span>                      <span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>])],</span>
<span class=gp>... </span>                      <span class=n>log</span><span class=o>.</span><span class=n>collector</span><span class=p>,</span> <span class=n>projectile</span><span class=p>,</span> <span class=n>contrl</span><span class=p>,</span> <span class=n>param</span><span class=p>,</span>
<span class=gp>... </span>                      <span class=mi>1</span><span class=p>,</span> <span class=mi>10000</span><span class=p>,</span> <span class=mf>14.890</span><span class=p>,</span> <span class=mi>10000</span><span class=p>,</span> <span class=mf>14.961</span><span class=p>)</span>
<span class=gp>... </span>        <span class=n>x</span><span class=o>=</span><span class=n>sio</span><span class=o>.</span><span class=n>getvalue</span><span class=p>()</span>
<span class=gp>>>> </span><span class=n>tt</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>tt</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=go>figureOfMerit;totalTime;nSteps;start0;start1;end0;end1</span>
<span class=gp>>>> </span><span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=n>tt</span><span class=p>[</span><span class=mi>1</span><span class=p>:]:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s2>";"</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=nb>float</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>"</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>y</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>";"</span><span class=p>)))</span>
<span class=go>403374.924;14.890;10000.000;0.000;1.000;1052.882;-33.244</span>
<span class=go>407810.750;14.961;10000.000;1.000;1.000;1058.902;-38.616</span>
</pre></div></div> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_log.ResultsLog.collector><span class="sig-name descname"><span class=pre>collector</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>index</span></span></em>, <em class=sig-param><span class=n><span class=pre>ode</span></span></em>, <em class=sig-param><span class=n><span class=pre>j</span></span></em>, <em class=sig-param><span class=n><span class=pre>time</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/results_log.html#ResultsLog.collector><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_log.ResultsLog.collector>¶</a><dd><p>Log the result of a multi-ode run.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>index</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the index of the result<li><p><strong>ode</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the ode result matrix<li><p><strong>j</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the figure of merit<li><p><strong>time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the time value</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl></section><section id=module-moptipyapps.dynamic_control.results_plot><span id=moptipyapps-dynamic-control-results-plot-module></span><h2>moptipyapps.dynamic_control.results_plot module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.results_plot>¶</a></h2><p>An illustrator for results gathered from ODE integration to multi-plots.<p>This evaluator will create figures where each sub-plot corresponds to one evolution of the system over time. The starting state is marked with a blue cross, the final state with a red one. Both states are connected with a line that marks the progress over time. The line begins with blue color and changes its color over violet/pinkish towards yellow the farther in time the system progresses.<dl class="py data"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_plot.END_COLOR><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.results_plot.</span></span><span class="sig-name descname"><span class=pre>END_COLOR</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Final><span class=pre>Final</span></a><span class=p><span class=pre>[</span></span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><span class=pre>str</span></a><span class=p><span class=pre>]</span></span></em><em class=property><span class=w> </span><span class=p><span class=pre>=</span></span><span class=w> </span><span class=pre>'red'</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_plot.END_COLOR>¶</a><dd><p>the end point color</p></dl><dl class="py data"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_plot.END_MARKER><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.results_plot.</span></span><span class="sig-name descname"><span class=pre>END_MARKER</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Final><span class=pre>Final</span></a><span class=p><span class=pre>[</span></span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><span class=pre>str</span></a><span class=p><span class=pre>]</span></span></em><em class=property><span class=w> </span><span class=p><span class=pre>=</span></span><span class=w> </span><span class=pre>'o●'</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_plot.END_MARKER>¶</a><dd><p>the end marker</p></dl><dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_plot.ResultsPlot><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.results_plot.</span></span><span class="sig-name descname"><span class=pre>ResultsPlot</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>dest_file</span></span></em>, <em class=sig-param><span class=n><span class=pre>sup_title</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dims</span></span></em>, <em class=sig-param><span class=n><span class=pre>plot_indices</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>(0,)</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dim_mod</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>0</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/results_plot.html#ResultsPlot><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_plot.ResultsPlot>¶</a><dd><p>Bases: <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/contextlib.html#contextlib.AbstractContextManager><code class="xref py py-class docutils literal notranslate"><span class=pre>AbstractContextManager</span></code></a></p> <p>A class for plotting results via <cite>multi_run_ode</cite>.</p> <p>Function <a class="reference internal"href=#moptipyapps.dynamic_control.ode.multi_run_ode title=moptipyapps.dynamic_control.ode.multi_run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>moptipyapps.dynamic_control.ode.multi_run_ode()</span></code></a> can pass its results to various output generating procedures. This class here offers a procedure for plotting them to a file.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_plot.ResultsPlot.collector><span class="sig-name descname"><span class=pre>collector</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>index</span></span></em>, <em class=sig-param><span class=n><span class=pre>ode</span></span></em>, <em class=sig-param><span class=n><span class=pre>j</span></span></em>, <em class=sig-param><span class=n><span class=pre>time</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/results_plot.html#ResultsPlot.collector><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_plot.ResultsPlot.collector>¶</a><dd><p>Plot the result of a multi-ode run.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>index</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the index of the result<li><p><strong>ode</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the ode result matrix<li><p><strong>j</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the figure of merit<li><p><strong>time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the time value</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl></dl><dl class="py data"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_plot.START_COLOR><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.results_plot.</span></span><span class="sig-name descname"><span class=pre>START_COLOR</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Final><span class=pre>Final</span></a><span class=p><span class=pre>[</span></span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><span class=pre>str</span></a><span class=p><span class=pre>]</span></span></em><em class=property><span class=w> </span><span class=p><span class=pre>=</span></span><span class=w> </span><span class=pre>'blue'</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_plot.START_COLOR>¶</a><dd><p>the start point color</p></dl><dl class="py data"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.results_plot.START_MARKER><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.results_plot.</span></span><span class="sig-name descname"><span class=pre>START_MARKER</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Final><span class=pre>Final</span></a><span class=p><span class=pre>[</span></span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><span class=pre>str</span></a><span class=p><span class=pre>]</span></span></em><em class=property><span class=w> </span><span class=p><span class=pre>=</span></span><span class=w> </span><span class=pre>'++'</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.results_plot.START_MARKER>¶</a><dd><p>the start marker</p></dl></section><section id=module-moptipyapps.dynamic_control.starting_points><span id=moptipyapps-dynamic-control-starting-points-module></span><h2>moptipyapps.dynamic_control.starting_points module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.starting_points>¶</a></h2><p>Synthesize some interesting starting points.<p>Here we have some basic functionality to synthesize starting points, i.e., training cases, for the dynamic systems control task. The points synthesized here by function <a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.make_interesting_starting_points title=moptipyapps.dynamic_control.starting_points.make_interesting_starting_points><code class="xref py py-func docutils literal notranslate"><span class=pre>make_interesting_starting_points()</span></code></a> try to fulfill two goals:<ol class="arabic simple"><li><p>the points should be as far away from each other as possible in the state space,<li><p>there should be points of many different distances from the state space origin, and<li><p>compared to the coordinates of the other points, the coordinates of the synthesized points should be sometimes smaller and sometimes larger (where sometimes should ideally mean “equally often”).</ol><p>These two goals are slightly contradicting and are achieved by forcing the points to be located on rings of increasing distance from the origin via <a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.interesting_point_transform title=moptipyapps.dynamic_control.starting_points.interesting_point_transform><code class="xref py py-func docutils literal notranslate"><span class=pre>interesting_point_transform()</span></code></a> while maximizing their mean distance to each other via <a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.interesting_point_objective title=moptipyapps.dynamic_control.starting_points.interesting_point_objective><code class="xref py py-func docutils literal notranslate"><span class=pre>interesting_point_objective()</span></code></a>. Since <a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.make_interesting_starting_points title=moptipyapps.dynamic_control.starting_points.make_interesting_starting_points><code class="xref py py-func docutils literal notranslate"><span class=pre>make_interesting_starting_points()</span></code></a> is a bit slow, it makes sense to pre-compute the points and then store them as array constants.<dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.starting_points.interesting_point_objective><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.starting_points.</span></span><span class="sig-name descname"><span class=pre>interesting_point_objective</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>other</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_radius</span></span></em>, <em class=sig-param><span class=n><span class=pre>dim</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/starting_points.html#interesting_point_objective><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.starting_points.interesting_point_objective>¶</a><dd><p>Compute the point diversity.</p> <ol class="arabic simple"><li><p>the distance between the points<li><p>the distance to the other points<li><p>the coordinates in the different dimensions should be equally often smaller and larger than those of the starting points</ol> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span></p></dl></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.starting_points.interesting_point_transform><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.starting_points.</span></span><span class="sig-name descname"><span class=pre>interesting_point_transform</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>x</span></span></em>, <em class=sig-param><span class=n><span class=pre>max_radius</span></span></em>, <em class=sig-param><span class=n><span class=pre>dim</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/starting_points.html#interesting_point_transform><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.starting_points.interesting_point_transform>¶</a><dd><p>Transform interesting points.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span></p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>xx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mf>12.0</span><span class=p>])</span>
<span class=gp>>>> </span><span class=n>ppp</span> <span class=o>=</span> <span class=n>interesting_point_transform</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ppp</span><span class=p>)</span>
<span class=go>[[0.6681531  1.33630621 2.00445931]</span>
<span class=go> [2.27921153 2.84901441 3.41881729]</span>
<span class=go> [3.76928033 4.30774895 4.84621757]</span>
<span class=go> [5.23423923 5.75766315 6.28108707]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>xx</span><span class=p>)</span>
<span class=go>[0.6681531  1.33630621 2.00445931 2.27921153 2.84901441 3.41881729</span>
<span class=go> 3.76928033 4.30774895 4.84621757 5.23423923 5.75766315 6.28108707]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>([</span><span class=nb>float</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>square</span><span class=p>(</span><span class=n>pppp</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()))</span> <span class=k>for</span> <span class=n>pppp</span> <span class=ow>in</span> <span class=n>ppp</span><span class=p>])</span>
<span class=go>[2.5, 5.0, 7.5, 10.0]</span>
<span class=gp>>>> </span><span class=n>ppp</span> <span class=o>=</span> <span class=n>interesting_point_transform</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ppp</span><span class=p>)</span>
<span class=go>[[0.6681531  1.33630621 2.00445931]</span>
<span class=go> [2.27921153 2.84901441 3.41881729]</span>
<span class=go> [3.76928033 4.30774895 4.84621757]</span>
<span class=go> [5.23423923 5.75766315 6.28108707]]</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>([</span><span class=nb>float</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>square</span><span class=p>(</span><span class=n>pppp</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()))</span> <span class=k>for</span> <span class=n>pppp</span> <span class=ow>in</span> <span class=n>ppp</span><span class=p>])</span>
<span class=go>[2.5, 5.0, 7.5, 10.0]</span>
<span class=gp>>>> </span><span class=n>ppp</span> <span class=o>=</span> <span class=n>interesting_point_transform</span><span class=p>(</span><span class=n>xx</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=n>ppp</span><span class=p>)</span>
<span class=go>[[0.74535599 1.49071198]</span>
<span class=go> [2.20132119 2.50305736]</span>
<span class=go> [3.200922   3.8411064 ]</span>
<span class=go> [4.39003072 5.01717796]</span>
<span class=go> [5.66154475 6.11484713]</span>
<span class=go> [6.75724629 7.3715414 ]]</span>
</pre></div></div></dl><dl class="py function"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.starting_points.make_interesting_starting_points><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.starting_points.</span></span><span class="sig-name descname"><span class=pre>make_interesting_starting_points</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>n</span></span></em>, <em class=sig-param><span class=n><span class=pre>other</span></span></em>, <em class=sig-param><span class=n><span class=pre>log</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>True</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/starting_points.html#make_interesting_starting_points><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.starting_points.make_interesting_starting_points>¶</a><dd><p>Create some reasonably diverse starting points.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>n</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a></span>) – the number of starting points<li><p><strong>other</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Iterable><code class="xref py py-class docutils literal notranslate"><span class=pre>Iterable</span></code></a>[<a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>]]</span>) – the other points<li><p><strong>log</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>True</span></code>) – write log output</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the starting points</p></dl> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>p</span> <span class=o>=</span> <span class=n>make_interesting_starting_points</span><span class=p>(</span>
<span class=gp>... </span>    <span class=mi>3</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>],</span> <span class=p>[</span><span class=mf>3.0</span><span class=p>,</span> <span class=mf>2.9</span><span class=p>]]),</span> <span class=kc>False</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=s2>","</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s2>";"</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>x</span><span class=si>:</span><span class=s2>.5f</span><span class=si>}</span><span class=s2>"</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>row</span><span class=p>)</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>p</span><span class=p>))</span>
<span class=go>1.77767;0.33029,1.10482;3.44328,3.18515;-4.39064</span>
</pre></div></div> <div class="doctest highlight-default notranslate"><div class=highlight><pre><span></span><span class=gp>>>> </span><span class=n>p</span> <span class=o>=</span> <span class=n>make_interesting_starting_points</span><span class=p>(</span>
<span class=gp>... </span>    <span class=mi>3</span><span class=p>,</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([[</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>7.0</span><span class=p>],</span> <span class=p>[</span><span class=mf>3.0</span><span class=p>,</span> <span class=mf>2.9</span><span class=p>,</span> <span class=mf>1.1</span><span class=p>]]),</span> <span class=kc>False</span><span class=p>)</span>
<span class=gp>>>> </span><span class=nb>print</span><span class=p>(</span><span class=s2>","</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s2>";"</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>x</span><span class=si>:</span><span class=s2>.5f</span><span class=si>}</span><span class=s2>"</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>row</span><span class=p>)</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>p</span><span class=p>))</span>
<span class=go>1.51392;-2.66567;0.86153,3.26154;-5.07757;2.03484,3.75627;5.88214;6.52310</span>
</pre></div></div></dl></section><section id=module-moptipyapps.dynamic_control.surrogate_optimizer><span id=moptipyapps-dynamic-control-surrogate-optimizer-module></span><h2>moptipyapps.dynamic_control.surrogate_optimizer module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.surrogate_optimizer>¶</a></h2><p>A surrogate system model-based Optimization approach.<p>In the real world, we want to synthesize a controller <cite>c(s, p)</cite> that can drive a dynamic system into a good state. The controller receives as input the current state <cite>s</cite>, say, from sensor readings. It can also be parameterized by a vector <cite>p</cite>, imagine <cite>c</cite> to be, for example, an artificial neural network and then <cite>p</cite> would be its weight vector. The output of <cite>c</cite> will influence the system in some way. In our example experiments, this is done by becoming part of the state differential <cite>ds/dt</cite>. Anyway, in the real world, the controller may steer the rotation speed of a rotor or the angles of rotor blades or whatever. Now you can imagine that doing real-world experiments is costly and takes a long time. Everytime we want to test a parameterization <cite>p</cite>, some form experiment, maybe in a wind tunnel, has to be done.<p>So it would be beneficial if we could replace the actual experiment by a simulation. This would mean that we learn a model <cite>M</cite> that can compute the state change <cite>ds/dt</cite> based on the current state <cite>s</cite> and controller output <cite>c</cite> at reasonable accuracy. If we had such a computational model, then we could run the controller optimization process on that model. Once finished, we could apply and evaluate the best controller that we have discovered in a real experiment. With the observed behavior of the actual controller system, we may even be able to update and improve our system model to become more accurate. So we could alternate between real experiments and optimization runs on the simulation. Of course, we would always need to do some real experiments at first to gather the data to obtain our initial model <cite>M</cite>. But if we can get this to work, then we could probably get much better controllers with fewer actual experiments.<p>This here is an algorithm that tries to implement the above pattern. This algorithm employs three different sub-algorithms:<ol class="arabic simple"><li><p>For sampling the initial <a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup title=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup><code class="xref py py-attr docutils literal notranslate"><span class=pre>fes_for_warmup</span></code></a> FEs, it uses a warm-up algorithm - by default, this is done by <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.algorithms.html#module-moptipy.algorithms.random_sampling><code class="xref py py-mod docutils literal notranslate"><span class=pre>random_sampling</span></code></a>.<li><p>Then, it spends <a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training title=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training><code class="xref py py-attr docutils literal notranslate"><span class=pre>fes_for_training</span></code></a> steps on the collected data to train the model using the model training algorithm, which, by default, is <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.algorithms.so.vector.html#moptipy.algorithms.so.vector.cmaes_lib.BiPopCMAES><code class="xref py py-class docutils literal notranslate"><span class=pre>BiPopCMAES</span></code></a>.<li><p>Then, it spends <a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run title=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run><code class="xref py py-attr docutils literal notranslate"><span class=pre>fes_per_model_run</span></code></a> steps to train controllers on the model, by default again with a <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.algorithms.so.vector.html#moptipy.algorithms.so.vector.cmaes_lib.BiPopCMAES><code class="xref py py-class docutils literal notranslate"><span class=pre>BiPopCMAES</span></code></a>.</ol><p>For the model and controller optimization, it thus uses by default the BiPop-CMA-ES offered by <cite>moptipy</cite> (<a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.algorithms.so.vector.html#moptipy.algorithms.so.vector.cmaes_lib.BiPopCMAES><code class="xref py py-class docutils literal notranslate"><span class=pre>BiPopCMAES</span></code></a>). But it uses two instances of this algorithm, namely one to optimize the controller parameters and one that optimizes the model parameters. And, as said, a random sampling method to gather the initial samples.<p>The idea is that we divide the computational budget into a warmup and a model-based phase. In the warmup phase, we use CMA-ES to normally optimize the controller based on the actual simulation of the dynamic system. However, while doing so, for every time step in the simulation, we collect three things: The current state vector <cite>s</cite>, the control vector <cite>c</cite>, and the resulting state differential <cite>ds/dt</cite>. Now if we have such data, we can look at the dynamic system as a function <cite>D(s, c) = ds/dt</cite>. If we consider the dynamic system to be such a function and we have collected the vectors <cite>(s, c)</cite> and <cite>ds/dt</cite>, then we may as well attempt to <em>learn</em> this system. So after the warmup phase, our algorithm does the following: In a loop (for the rest of the computational budget), it first tries to learn a model <cite>M</cite> of <cite>D</cite>. Then, it replaces the actual differential equations of the system in ODE solution approach of the objective function with <cite>M</cite>. In other words, we kick out the actual system and instead use the learned system model <cite>M</cite>. We replace the differential equations that describe the system using <cite>M</cite>. We can now run an entire optimization process on this learned model only, with ODE integration and all. This optimization process gives us one new solution which we then evaluate on the real objective function (which costs 1 FE and gives us a new heap of <cite>(s, c)</cite> and <cite>ds/dt</cite> vectors). With this new data, we again learn a new and hopefully more accurate model <cite>M</cite>. This process is iterated until the rest of the computational budget is exhausted.<p>This approach hopefully allows us to learn a model of a dynamic system while synthesizing a controller for it. Since we can have infinitely more time to synthesize the controller on a learned system model compared to an actual model, this may give us much better results.<p>The starting points of the work here were conversations with Prof. Dr. Bernd NOACK and Guy Yoslan CORNEJO MACEDA of the Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)).<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.surrogate_optimizer.</span></span><span class="sig-name descname"><span class=pre>SurrogateOptimizer</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>system_model</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller_space</span></span></em>, <em class=sig-param><span class=n><span class=pre>objective</span></span></em>, <em class=sig-param><span class=n><span class=pre>fes_for_warmup</span></span></em>, <em class=sig-param><span class=n><span class=pre>fes_for_training=None</span></span></em>, <em class=sig-param><span class=n><span class=pre>ms_for_training=None</span></span></em>, <em class=sig-param><span class=n><span class=pre>fes_per_model_run=None</span></span></em>, <em class=sig-param><span class=n><span class=pre>ms_per_model_run=None</span></span></em>, <em class=sig-param><span class=n><span class=pre>fancy_logs=False</span></span></em>, <em class=sig-param><span class=n><span class=pre>warmup_algorithm=&LTfunction</span> <span class=pre>SurrogateOptimizer.&LTlambda>></span></span></em>, <em class=sig-param><span class=n><span class=pre>model_training_algorithm=&LTfunction</span> <span class=pre>_bpcmaes></span></span></em>, <em class=sig-param><span class=n><span class=pre>controller_training_algorithm=&LTfunction</span> <span class=pre>_bpcmaes></span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/surrogate_optimizer.html#SurrogateOptimizer><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.algorithm.Algorithm><code class="xref py py-class docutils literal notranslate"><span class=pre>Algorithm</span></code></a></p> <p>A surrogate model-based CMA-ES algorithm.</p> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fancy_logs><span class="sig-name descname"><span class=pre>fancy_logs</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fancy_logs>¶</a><dd><p>should we do fancy logging?</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training><span class="sig-name descname"><span class=pre>fes_for_training</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> <span class=pre>|</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training>¶</a><dd><p>the FEs for training the model</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup><span class="sig-name descname"><span class=pre>fes_for_warmup</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup>¶</a><dd><p>the number of objective function evaluations to be used for warmup</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run><span class="sig-name descname"><span class=pre>fes_per_model_run</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> <span class=pre>|</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run>¶</a><dd><p>the FEs for each run on the model</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.initialize><span class="sig-name descname"><span class=pre>initialize</span></span><span class=sig-paren>(</span><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/surrogate_optimizer.html#SurrogateOptimizer.initialize><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.initialize>¶</a><dd><p>Initialize.</p> <dl class="field-list simple"><dt class=field-odd>Return type<span class=colon>:</span><dd class=field-odd><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/surrogate_optimizer.html#SurrogateOptimizer.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.ms_for_training><span class="sig-name descname"><span class=pre>ms_for_training</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> <span class=pre>|</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.ms_for_training>¶</a><dd><p>the ms for training the model</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.ms_per_model_run><span class="sig-name descname"><span class=pre>ms_per_model_run</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a> <span class=pre>|</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.ms_per_model_run>¶</a><dd><p>the ms for each run on the model</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.solve><span class="sig-name descname"><span class=pre>solve</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>process</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/surrogate_optimizer.html#SurrogateOptimizer.solve><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.solve>¶</a><dd><p>Solve the modelling problem.</p> <p>This function begins by spending <a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup title=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup><code class="xref py py-attr docutils literal notranslate"><span class=pre>fes_for_warmup</span></code></a> objective function evaluations (FEs) on the actual problem, i.e., by trying to synthesize controllers for the “real” system, using <cite>process</cite> to evaluate the controller performance. The objective function passed to the constructor (an instance of <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a>) must be used by <cite>process</cite> as well. This way, during the warm-up phase, we can collect tuples of the (system state, controller output) and the resulting system differential for each simulated time step. This is done via <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_raw()</span></code></a>.</p> <p>After the warm-up phase, we can obtain these collected data via <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials title=moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials><code class="xref py py-meth docutils literal notranslate"><span class=pre>get_differentials()</span></code></a>. The data is then used to train a model via the model objective function <a class="reference internal"href=#module-moptipyapps.dynamic_control.model_objective title=moptipyapps.dynamic_control.model_objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>model_objective</span></code></a>. The system model is again basically a <a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller title=moptipyapps.dynamic_control.controller.Controller><code class="xref py py-class docutils literal notranslate"><span class=pre>Controller</span></code></a> which is parameterized appropriately. For this, we use a CMA-ES algorithm for <a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training title=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training><code class="xref py py-attr docutils literal notranslate"><span class=pre>fes_for_training</span></code></a> FEs.</p> <p>Once the model training is completed, we switch the objective function to use the model instead of the actual system for evaluating controllers, which is done via <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_model title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_model><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_model()</span></code></a>. We then train a completely new controller on the model objective function. Notice that now, the actual system is not involved at all. We do this again using a CMA-ES algorithm for <a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run title=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run><code class="xref py py-attr docutils literal notranslate"><span class=pre>fes_per_model_run</span></code></a> FEs.</p> <p>After training the controller, we can evaluate it on the real system using the <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.process.Process.evaluate><code class="xref py py-meth docutils literal notranslate"><span class=pre>evaluate()</span></code></a> method of the actual <cite>process</cite> (after switching back to the real model via <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw title=moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw><code class="xref py py-meth docutils literal notranslate"><span class=pre>set_raw()</span></code></a>). This nets us a) the actual controller performance and b) a new set of (system state, controller output) + system state differential tuples.</p> <p>Since we now have more data, we can go back and train a new system model and then use this model for another model-based optimization run. And so on, and so on. Until the budget is exhausted.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>process</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.process.Process><code class="xref py py-class docutils literal notranslate"><span class=pre>Process</span></code></a></span>) – the original optimization process, which must use the <cite>objective</cite> function (an instance of <a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit title=moptipyapps.dynamic_control.objective.FigureOfMerit><code class="xref py py-class docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a>) as its objective function.</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.system_model><span class="sig-name descname"><span class=pre>system_model</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel title=moptipyapps.dynamic_control.system_model.SystemModel><code class="xref py py-class docutils literal notranslate"><span class=pre>SystemModel</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.system_model>¶</a><dd><p>the system model</p></dl></dl></section><section id=module-moptipyapps.dynamic_control.system><span id=moptipyapps-dynamic-control-system-module></span><h2>moptipyapps.dynamic_control.system module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.system>¶</a></h2><p>A class to model a dynamic system governed by differential equations.<p>A system has a current state vector at any point in time. The state changes over time based on differential equations. These equations can be influenced by the output of a <a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a>. Our <a class="reference internal"href=#moptipyapps.dynamic_control.system.System title=moptipyapps.dynamic_control.system.System><code class="xref py py-class docutils literal notranslate"><span class=pre>System</span></code></a> presents the state dimension and differential equations. It also presents several starting states for simulating the system. The starting states are divided into training and testing states. The training states can be used for, well, training controllers to learn how to handle the system. The testing states are then used to verify whether a synthesized controller actually works.<p>Examples for different dynamic systems are given in package <a class="reference internal"href=moptipyapps.dynamic_control.systems.html#module-moptipyapps.dynamic_control.systems title=moptipyapps.dynamic_control.systems><code class="xref py py-mod docutils literal notranslate"><span class=pre>systems</span></code></a>.<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.system.</span></span><span class="sig-name descname"><span class=pre>System</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>name</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dims</span></span></em>, <em class=sig-param><span class=n><span class=pre>control_dims</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dim_mod</span></span></em>, <em class=sig-param><span class=n><span class=pre>state_dims_in_j</span></span></em>, <em class=sig-param><span class=n><span class=pre>gamma</span></span></em>, <em class=sig-param><span class=n><span class=pre>test_starting_states</span></span></em>, <em class=sig-param><span class=n><span class=pre>training_starting_states</span></span></em>, <em class=sig-param><span class=n><span class=pre>test_steps</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>5000</span></span></em>, <em class=sig-param><span class=n><span class=pre>test_time</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>50.0</span></span></em>, <em class=sig-param><span class=n><span class=pre>training_steps</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>1000</span></span></em>, <em class=sig-param><span class=n><span class=pre>training_time</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>50.0</span></span></em>, <em class=sig-param><span class=n><span class=pre>plot_examples</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>(0,)</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system.html#System><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System>¶</a><dd><p>Bases: <a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.api.html#moptipy.api.component.Component><code class="xref py py-class docutils literal notranslate"><span class=pre>Component</span></code></a></p> <p>A class for governing a system via differential system.</p> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.control_dims><span class="sig-name descname"><span class=pre>control_dims</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.control_dims>¶</a><dd><p>the dimensions of the controller output</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.describe_system><span class="sig-name descname"><span class=pre>describe_system</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>title</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller</span></span></em>, <em class=sig-param><span class=n><span class=pre>parameters</span></span></em>, <em class=sig-param><span class=n><span class=pre>base_name</span></span></em>, <em class=sig-param><span class=n><span class=pre>dest_dir</span></span></em>, <em class=sig-param><span class=n><span class=pre>skip_if_exists</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>False</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system.html#System.describe_system><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.describe_system>¶</a><dd><p>Describe the performance of a given system of system.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>title</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a> | <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span>) – the title<li><p><strong>controller</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.Callable><code class="xref py py-data docutils literal notranslate"><span class=pre>Callable</span></code></a>[[<a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>), <a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a>], <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a>]</span>) – the controller to simulate<li><p><strong>parameters</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/typing.html#typing.TypeVar><code class="xref py py-class docutils literal notranslate"><span class=pre>TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class=pre>T</span></code>)</span>) – the controller parameters<li><p><strong>base_name</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the base name of the file to produce<li><p><strong>dest_dir</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the destination directory<li><p><strong>skip_if_exists</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>False</span></code>) – if the file already exists</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>[<a class="reference external"title="(in pycommons v0.8.65)"href=https://thomasweise.github.io/pycommons/pycommons.io.html#pycommons.io.path.Path><code class="xref py py-class docutils literal notranslate"><span class=pre>Path</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a>]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the paths of the generated files</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.describe_system_without_control><span class="sig-name descname"><span class=pre>describe_system_without_control</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>dest_dir</span></span></em>, <em class=sig-param><span class=n><span class=pre>skip_if_exists</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>True</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system.html#System.describe_system_without_control><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.describe_system_without_control>¶</a><dd><p>Describe the performance of a given system of system.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>dest_dir</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the destination directory<li><p><strong>skip_if_exists</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>True</span></code>) – if the file already exists</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a>[<a class="reference external"title="(in pycommons v0.8.65)"href=https://thomasweise.github.io/pycommons/pycommons.io.html#pycommons.io.path.Path><code class="xref py py-class docutils literal notranslate"><span class=pre>Path</span></code></a>, <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a>]</span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the paths of the generated files</p></dl></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.equations><span class="sig-name descname"><span class=pre>equations</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>state</span></span></em>, <em class=sig-param><span class=n><span class=pre>time</span></span></em>, <em class=sig-param><span class=n><span class=pre>control</span></span></em>, <em class=sig-param><span class=n><span class=pre>out</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system.html#System.equations><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.equations>¶</a><dd><p>Compute the values of the differential equations to be simulated.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>state</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the state of the system<li><p><strong>time</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a></span>) – the time index<li><p><strong>control</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the output of the controller<li><p><strong>out</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a></span>) – the differential, i.e., the output of this function</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.gamma><span class="sig-name descname"><span class=pre>gamma</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.gamma>¶</a><dd><p>The Weight of the control values in the figure of merit computation.</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system.html#System.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.name><span class="sig-name descname"><span class=pre>name</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.name>¶</a><dd><p>the name of the model</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.plot_examples><span class="sig-name descname"><span class=pre>plot_examples</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#tuple><code class="xref py py-class docutils literal notranslate"><span class=pre>tuple</span></code></a><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>,</span> <a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#Ellipsis><code class="xref py py-data docutils literal notranslate"><span class=pre>...</span></code></a><span class=pre>]]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.plot_examples>¶</a><dd><p>the plot examples</p></dl> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.plot_points><span class="sig-name descname"><span class=pre>plot_points</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>dest_dir</span></span></em>, <em class=sig-param><span class=n><span class=pre>skip_if_exists</span></span><span class=o><span class=pre>=</span></span><span class=default_value><span class=pre>True</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system.html#System.plot_points><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.plot_points>¶</a><dd><p>Plot the training and testing points of the equation.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><ul class=simple><li><p><strong>dest_dir</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/stdtypes.html#str><code class="xref py py-class docutils literal notranslate"><span class=pre>str</span></code></a></span>) – the destination directory<li><p><strong>skip_if_exists</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#bool><code class="xref py py-class docutils literal notranslate"><span class=pre>bool</span></code></a></span>, default: <code class="docutils literal notranslate"><span class=pre>True</span></code>) – <cite>True</cite> to skip existing files, <cite>False</cite> otherwise</ul><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in pycommons v0.8.65)"href=https://thomasweise.github.io/pycommons/pycommons.io.html#pycommons.io.path.Path><code class="xref py py-class docutils literal notranslate"><span class=pre>Path</span></code></a></span></p><dt class=field-odd>Returns<span class=colon>:</span><dd class=field-odd><p>the plotted file</p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.state_dim_mod><span class="sig-name descname"><span class=pre>state_dim_mod</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.state_dim_mod>¶</a><dd><p>The modulus for the state dimensions for plotting</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.state_dims><span class="sig-name descname"><span class=pre>state_dims</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.state_dims>¶</a><dd><p>the dimensions of the state variable</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.state_dims_in_j><span class="sig-name descname"><span class=pre>state_dims_in_j</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.state_dims_in_j>¶</a><dd><p>The number of dimensions used in the J computation</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.test_starting_states><span class="sig-name descname"><span class=pre>test_starting_states</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.test_starting_states>¶</a><dd><p>the test starting states</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.test_steps><span class="sig-name descname"><span class=pre>test_steps</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.test_steps>¶</a><dd><p>the test simulation steps</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.test_time><span class="sig-name descname"><span class=pre>test_time</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.test_time>¶</a><dd><p>the test time</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.training_starting_states><span class="sig-name descname"><span class=pre>training_starting_states</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in NumPy v2.2)"href=https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray><code class="xref py py-class docutils literal notranslate"><span class=pre>ndarray</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.training_starting_states>¶</a><dd><p>the test starting states</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.training_steps><span class="sig-name descname"><span class=pre>training_steps</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#int><code class="xref py py-class docutils literal notranslate"><span class=pre>int</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.training_steps>¶</a><dd><p>the training simulation steps</p></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.System.training_time><span class="sig-name descname"><span class=pre>training_time</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/functions.html#float><code class="xref py py-class docutils literal notranslate"><span class=pre>float</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.System.training_time>¶</a><dd><p>the training time</p></dl></dl><dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system.T><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.system.</span></span><span class="sig-name descname"><span class=pre>T</span></span><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system.T>¶</a><dd><p>the type variable for ODE controller parameters</p> <p>alias of TypeVar(‘T’)</p></dl></section><section id=module-moptipyapps.dynamic_control.system_model><span id=moptipyapps-dynamic-control-system-model-module></span><h2>moptipyapps.dynamic_control.system_model module<a title="Link to this heading"class=headerlink href=#module-moptipyapps.dynamic_control.system_model>¶</a></h2><p>An extended dynamic control problem <cite>Instance</cite> with a model for the dynamics.<p>An <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a> is a combination of<ul class=simple><li><p>a set of differential equations (<a class="reference internal"href=#module-moptipyapps.dynamic_control.system title=moptipyapps.dynamic_control.system><code class="xref py py-mod docutils literal notranslate"><span class=pre>system</span></code></a>) that govern the change <cite>D=ds/dt</cite> of the state <cite>s</cite> of a dynamic system (based on its current state <cite>s</cite> and the controller output <cite>c(s)</cite>), i.e., <cite>ds/dt=D(s,c(s))</cite> and<li><p>a blueprint <cite>c(s, p)</cite> of the controller <cite>c(s)</cite> (<a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a>).</ul><p>The blueprint of the controller is basically a function that can be parameterized, so it is actually a function <cite>c(s, p)</cite> and the goal of optimization is to parameterize it in such a way that the figure of merit, i.e., the objective value (<a class="reference internal"href=#module-moptipyapps.dynamic_control.objective title=moptipyapps.dynamic_control.objective><code class="xref py py-mod docutils literal notranslate"><span class=pre>objective</span></code></a>) of the system (usually the sum of squared state values and squared controller outputs) is minimized. Parameterization means finding good values <cite>p</cite> such that the above goal is reached. In other words, we want to synthesize a controller (by finding good values of <cite>p</cite>) in such a way that the state equations drive the system into a stable state, usually ideally the origin of the coordinate system.<p>Now here this <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a> is extended to a <a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel title=moptipyapps.dynamic_control.system_model.SystemModel><code class="xref py py-class docutils literal notranslate"><span class=pre>SystemModel</span></code></a> by adding a parameterized model <cite>M(s, c(s), q)</cite> to the mix. The idea is to develop the parameterization <cite>q</cite> of the model <cite>M</cite> that can replace the actual system equations <cite>D</cite>. Such a model receives as input the current system state vector <cite>s</cite> and the controller output <cite>c(s)</cite> for the state vector <cite>s</cite>. It will return the differential <cite>D</cite> of the system state, i.e., <cite>ds/dt</cite>. In other words, a properly constructed model can replace the <cite>equations</cite> parameter in the ODE integrator <a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode title=moptipyapps.dynamic_control.ode.run_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>run_ode()</span></code></a>. The input used for training is provided by <a class="reference internal"href=#moptipyapps.dynamic_control.ode.diff_from_ode title=moptipyapps.dynamic_control.ode.diff_from_ode><code class="xref py py-func docutils literal notranslate"><span class=pre>diff_from_ode()</span></code></a>.<p>What we do here is to re-use the same function models as used in controllers (<a class="reference internal"href=#module-moptipyapps.dynamic_control.controller title=moptipyapps.dynamic_control.controller><code class="xref py py-mod docutils literal notranslate"><span class=pre>controller</span></code></a>) and learn their parameterizations from the observed data. If successful, we can wrap everything together into a <cite>Callable</cite> and plug it into the system instead of the original equations.<p>The thing that <a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel title=moptipyapps.dynamic_control.system_model.SystemModel><code class="xref py py-class docutils literal notranslate"><span class=pre>SystemModel</span></code></a> offers is thus a blueprint of the model <cite>M</cite>. Obviously, we can conceive many different such blueprints. We could have a linear model, a quadratic model, or maybe neural network (in which case, we need to decide about the number of layers and layer sizes). So an instance of this surrogate model based approach has an equation system, a controller blueprint, and a model blueprint.<p>An example implementation of the concept of synthesizing models for a dynamic system in order to synthesize controllers is given as the <a class="reference internal"href=#module-moptipyapps.dynamic_control.surrogate_optimizer title=moptipyapps.dynamic_control.surrogate_optimizer><code class="xref py py-mod docutils literal notranslate"><span class=pre>surrogate_optimizer</span></code></a> algorithm. Examples for different dynamic systems controllers (which we here also use to model the systems themselves) are given in package <a class="reference internal"href=moptipyapps.dynamic_control.controllers.html#module-moptipyapps.dynamic_control.controllers title=moptipyapps.dynamic_control.controllers><code class="xref py py-mod docutils literal notranslate"><span class=pre>controllers</span></code></a>.<p>The starting points of the work here were conversations with Prof. Dr. Bernd NOACK and Guy Yoslan CORNEJO MACEDA of the Harbin Institute of Technology in Shenzhen, China (哈尔滨工业大学(深圳)).<dl class="py class"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system_model.SystemModel><em class=property><span class=k><span class=pre>class</span></span><span class=w> </span></em><span class="sig-prename descclassname"><span class=pre>moptipyapps.dynamic_control.system_model.</span></span><span class="sig-name descname"><span class=pre>SystemModel</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>system</span></span></em>, <em class=sig-param><span class=n><span class=pre>controller</span></span></em>, <em class=sig-param><span class=n><span class=pre>model</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system_model.html#SystemModel><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system_model.SystemModel>¶</a><dd><p>Bases: <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance title=moptipyapps.dynamic_control.instance.Instance><code class="xref py py-class docutils literal notranslate"><span class=pre>Instance</span></code></a></p> <p>A dynamic system control <cite>Instance</cite> with a system model blueprint.</p> <dl class="py method"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system_model.SystemModel.log_parameters_to><span class="sig-name descname"><span class=pre>log_parameters_to</span></span><span class=sig-paren>(</span><em class=sig-param><span class=n><span class=pre>logger</span></span></em><span class=sig-paren>)</span><a class="reference internal"href=_modules/moptipyapps/dynamic_control/system_model.html#SystemModel.log_parameters_to><span class=viewcode-link><span class=pre>[source]</span></span></a><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system_model.SystemModel.log_parameters_to>¶</a><dd><p>Log all parameters of this component as key-value pairs.</p> <dl class="field-list simple"><dt class=field-odd>Parameters<span class=colon>:</span><dd class=field-odd><p><strong>logger</strong> (<span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in moptipy v0.9.148)"href=https://thomasweise.github.io/moptipy/moptipy.utils.html#moptipy.utils.logger.KeyValueLogSection><code class="xref py py-class docutils literal notranslate"><span class=pre>KeyValueLogSection</span></code></a></span>) – the logger for the parameters</p><dt class=field-even>Return type<span class=colon>:</span><dd class=field-even><p><span class=sphinx_autodoc_typehints-type><a class="reference external"title="(in Python v3.13)"href=https://docs.python.org/3/library/constants.html#None><code class="xref py py-obj docutils literal notranslate"><span class=pre>None</span></code></a></span></p></dl></dl> <dl class="py attribute"><dt class="sig sig-object py"id=moptipyapps.dynamic_control.system_model.SystemModel.model><span class="sig-name descname"><span class=pre>model</span></span><em class=property><span class=p><span class=pre>:</span></span><span class=w> </span><code class="xref py py-class docutils literal notranslate"><span class=pre>Final</span></code><span class=pre>[</span><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller title=moptipyapps.dynamic_control.controller.Controller><code class="xref py py-class docutils literal notranslate"><span class=pre>Controller</span></code></a><span class=pre>]</span></em><a title="Link to this definition"class=headerlink href=#moptipyapps.dynamic_control.system_model.SystemModel.model>¶</a><dd><p>the model blueprint that can be trained to hopefully replace the <a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.system title=moptipyapps.dynamic_control.instance.Instance.system><code class="xref py py-attr docutils literal notranslate"><span class=pre>system</span></code></a> in the ODE integration / system simulation procedure</p></dl></dl></section></section><div class=clearer></div></div></div></div><div aria-label=Main class=sphinxsidebar role=navigation><div class=sphinxsidebarwrapper><div><h3><a href=index.html>Table of Contents</a></h3><ul><li><a class="reference internal"href=#>moptipyapps.dynamic_control package</a><ul><li><a class="reference internal"href=#subpackages>Subpackages</a><li><a class="reference internal"href=#submodules>Submodules</a><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.controller>moptipyapps.dynamic_control.controller module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller><code class="docutils literal notranslate"><span class=pre>Controller</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.control_dims><code class="docutils literal notranslate"><span class=pre>Controller.control_dims</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.controller><code class="docutils literal notranslate"><span class=pre>Controller.controller()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.log_parameters_to><code class="docutils literal notranslate"><span class=pre>Controller.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.name><code class="docutils literal notranslate"><span class=pre>Controller.name</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.param_dims><code class="docutils literal notranslate"><span class=pre>Controller.param_dims</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.parameter_space><code class="docutils literal notranslate"><span class=pre>Controller.parameter_space()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.controller.Controller.state_dims><code class="docutils literal notranslate"><span class=pre>Controller.state_dims</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.experiment_raw>moptipyapps.dynamic_control.experiment_raw module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_raw.base_setup><code class="docutils literal notranslate"><span class=pre>base_setup()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_raw.cmaes><code class="docutils literal notranslate"><span class=pre>cmaes()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_raw.make_instances><code class="docutils literal notranslate"><span class=pre>make_instances()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_raw.on_completion><code class="docutils literal notranslate"><span class=pre>on_completion()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_raw.run><code class="docutils literal notranslate"><span class=pre>run()</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.experiment_surrogate>moptipyapps.dynamic_control.experiment_surrogate module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.MAX_FES><code class="docutils literal notranslate"><span class=pre>MAX_FES</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.base_setup><code class="docutils literal notranslate"><span class=pre>base_setup()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.cmaes_raw><code class="docutils literal notranslate"><span class=pre>cmaes_raw()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.cmaes_surrogate><code class="docutils literal notranslate"><span class=pre>cmaes_surrogate()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.make_instances><code class="docutils literal notranslate"><span class=pre>make_instances()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.on_completion><code class="docutils literal notranslate"><span class=pre>on_completion()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.experiment_surrogate.run><code class="docutils literal notranslate"><span class=pre>run()</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.instance>moptipyapps.dynamic_control.instance module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance><code class="docutils literal notranslate"><span class=pre>Instance</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.controller><code class="docutils literal notranslate"><span class=pre>Instance.controller</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.describe_parameterization><code class="docutils literal notranslate"><span class=pre>Instance.describe_parameterization()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.log_parameters_to><code class="docutils literal notranslate"><span class=pre>Instance.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.name><code class="docutils literal notranslate"><span class=pre>Instance.name</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.instance.Instance.system><code class="docutils literal notranslate"><span class=pre>Instance.system</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.model_objective>moptipyapps.dynamic_control.model_objective module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective><code class="docutils literal notranslate"><span class=pre>ModelObjective</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective.begin><code class="docutils literal notranslate"><span class=pre>ModelObjective.begin()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective.end><code class="docutils literal notranslate"><span class=pre>ModelObjective.end()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective.evaluate><code class="docutils literal notranslate"><span class=pre>ModelObjective.evaluate()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective.log_parameters_to><code class="docutils literal notranslate"><span class=pre>ModelObjective.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.model_objective.ModelObjective.lower_bound><code class="docutils literal notranslate"><span class=pre>ModelObjective.lower_bound()</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.objective>moptipyapps.dynamic_control.objective module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit><code class="docutils literal notranslate"><span class=pre>FigureOfMerit</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.evaluate><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.evaluate()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.get_differentials><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.get_differentials()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.initialize><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.initialize()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.instance><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.instance</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.log_parameters_to><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.lower_bound><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.lower_bound()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_model><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.set_model()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.set_raw><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.set_raw()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMerit.sum_up_results><code class="docutils literal notranslate"><span class=pre>FigureOfMerit.sum_up_results()</span></code></a></ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMeritLE><code class="docutils literal notranslate"><span class=pre>FigureOfMeritLE</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.objective.FigureOfMeritLE.sum_up_results><code class="docutils literal notranslate"><span class=pre>FigureOfMeritLE.sum_up_results()</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.ode>moptipyapps.dynamic_control.ode module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.ode.T><code class="docutils literal notranslate"><span class=pre>T</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.ode.diff_from_ode><code class="docutils literal notranslate"><span class=pre>diff_from_ode()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.ode.j_from_ode><code class="docutils literal notranslate"><span class=pre>j_from_ode()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.ode.multi_run_ode><code class="docutils literal notranslate"><span class=pre>multi_run_ode()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.ode.run_ode><code class="docutils literal notranslate"><span class=pre>run_ode()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.ode.t_from_ode><code class="docutils literal notranslate"><span class=pre>t_from_ode()</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.results_log>moptipyapps.dynamic_control.results_log module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_log.ResultsLog><code class="docutils literal notranslate"><span class=pre>ResultsLog</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_log.ResultsLog.collector><code class="docutils literal notranslate"><span class=pre>ResultsLog.collector()</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.results_plot>moptipyapps.dynamic_control.results_plot module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_plot.END_COLOR><code class="docutils literal notranslate"><span class=pre>END_COLOR</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_plot.END_MARKER><code class="docutils literal notranslate"><span class=pre>END_MARKER</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_plot.ResultsPlot><code class="docutils literal notranslate"><span class=pre>ResultsPlot</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_plot.ResultsPlot.collector><code class="docutils literal notranslate"><span class=pre>ResultsPlot.collector()</span></code></a></ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_plot.START_COLOR><code class="docutils literal notranslate"><span class=pre>START_COLOR</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.results_plot.START_MARKER><code class="docutils literal notranslate"><span class=pre>START_MARKER</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.starting_points>moptipyapps.dynamic_control.starting_points module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.interesting_point_objective><code class="docutils literal notranslate"><span class=pre>interesting_point_objective()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.interesting_point_transform><code class="docutils literal notranslate"><span class=pre>interesting_point_transform()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.starting_points.make_interesting_starting_points><code class="docutils literal notranslate"><span class=pre>make_interesting_starting_points()</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.surrogate_optimizer>moptipyapps.dynamic_control.surrogate_optimizer module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fancy_logs><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.fancy_logs</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_training><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.fes_for_training</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_for_warmup><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.fes_for_warmup</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.fes_per_model_run><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.fes_per_model_run</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.initialize><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.initialize()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.log_parameters_to><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.ms_for_training><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.ms_for_training</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.ms_per_model_run><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.ms_per_model_run</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.solve><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.solve()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.surrogate_optimizer.SurrogateOptimizer.system_model><code class="docutils literal notranslate"><span class=pre>SurrogateOptimizer.system_model</span></code></a></ul></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.system>moptipyapps.dynamic_control.system module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System><code class="docutils literal notranslate"><span class=pre>System</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.control_dims><code class="docutils literal notranslate"><span class=pre>System.control_dims</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.describe_system><code class="docutils literal notranslate"><span class=pre>System.describe_system()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.describe_system_without_control><code class="docutils literal notranslate"><span class=pre>System.describe_system_without_control()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.equations><code class="docutils literal notranslate"><span class=pre>System.equations()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.gamma><code class="docutils literal notranslate"><span class=pre>System.gamma</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.log_parameters_to><code class="docutils literal notranslate"><span class=pre>System.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.name><code class="docutils literal notranslate"><span class=pre>System.name</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.plot_examples><code class="docutils literal notranslate"><span class=pre>System.plot_examples</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.plot_points><code class="docutils literal notranslate"><span class=pre>System.plot_points()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.state_dim_mod><code class="docutils literal notranslate"><span class=pre>System.state_dim_mod</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.state_dims><code class="docutils literal notranslate"><span class=pre>System.state_dims</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.state_dims_in_j><code class="docutils literal notranslate"><span class=pre>System.state_dims_in_j</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.test_starting_states><code class="docutils literal notranslate"><span class=pre>System.test_starting_states</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.test_steps><code class="docutils literal notranslate"><span class=pre>System.test_steps</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.test_time><code class="docutils literal notranslate"><span class=pre>System.test_time</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.training_starting_states><code class="docutils literal notranslate"><span class=pre>System.training_starting_states</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.training_steps><code class="docutils literal notranslate"><span class=pre>System.training_steps</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.System.training_time><code class="docutils literal notranslate"><span class=pre>System.training_time</span></code></a></ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.system.T><code class="docutils literal notranslate"><span class=pre>T</span></code></a></ul><li><a class="reference internal"href=#module-moptipyapps.dynamic_control.system_model>moptipyapps.dynamic_control.system_model module</a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel><code class="docutils literal notranslate"><span class=pre>SystemModel</span></code></a><ul><li><a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel.log_parameters_to><code class="docutils literal notranslate"><span class=pre>SystemModel.log_parameters_to()</span></code></a><li><a class="reference internal"href=#moptipyapps.dynamic_control.system_model.SystemModel.model><code class="docutils literal notranslate"><span class=pre>SystemModel.model</span></code></a></ul></ul></ul></ul></div><div><h4>Previous topic</h4><p class=topless><a title="previous chapter"href=moptipyapps.binpacking2d.objectives.html>moptipyapps.binpacking2d.objectives package</a></div><div><h4>Next topic</h4><p class=topless><a title="next chapter"href=moptipyapps.dynamic_control.controllers.html>moptipyapps.dynamic_control.controllers package</a></div><div aria-label="source link"role=note><h3>This Page</h3><ul class=this-page-menu><li><a href=_sources/moptipyapps.dynamic_control.rst.txt rel=nofollow>Show Source</a></ul></div><search id=searchbox role=search style=display:none> <h3 id=searchlabel>Quick search</h3> <div class=searchformwrapper><form action=search.html class=search><input aria-labelledby=searchlabel autocapitalize=off autocomplete=off autocorrect=off name=q spellcheck=false><input type=submit value=Go></form></div> </search><script>document.getElementById(`searchbox`).style.display=`block`</script></div></div><div class=clearer></div></div><div aria-label=Related class=related role=navigation><h3>Navigation</h3><ul><li class=right style=margin-right:10px><a title="General Index"href=genindex.html>index</a><li class=right><a title="Python Module Index"href=py-modindex.html>modules</a> |<li class=right><a title="moptipyapps.dynamic_control.controllers package"href=moptipyapps.dynamic_control.controllers.html>next</a> |<li class=right><a title="moptipyapps.binpacking2d.objectives package"href=moptipyapps.binpacking2d.objectives.html>previous</a> |<li class="nav-item nav-item-0"><a href=index.html>moptipyapps 0.8.68 documentation</a> »<li class="nav-item nav-item-1"><a href=modules.html>moptipyapps</a> »<li class="nav-item nav-item-2"><a href=moptipyapps.html>moptipyapps package</a> »<li class="nav-item nav-item-this"><a href>moptipyapps.dynamic_control package</a></ul></div><div class=footer role=contentinfo>© Copyright 2023-2025, Thomas Weise.</div>
